<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on December 28, 2020 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Dmalloc Tutorial</title>

<meta name="description" content="Dmalloc Tutorial">
<meta name="keywords" content="Dmalloc Tutorial">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Top"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Debug-Malloc-Library"></a>
<h1 class="settitle">Debug Malloc Library</h1>

<p>Version Version 5.6.5 &ndash; December 2020
</p>
<a name="index-introduction"></a>
<a name="index-author"></a>

<p>The debug memory allocation or <em>dmalloc</em> library has been designed as a drop in replacement for the system&rsquo;s
<code>malloc</code>, <code>realloc</code>, <code>calloc</code>, <code>free</code> and other memory management routines while providing powerful
debugging facilities configurable at runtime.  These facilities include such things as memory-leak tracking, fence-post
write detection, file/line number reporting, and general logging of statistics.
</p>
<p>The library is reasonably portable having been run successfully on at least the following operating systems: AIX, DGUX,
Free/Net/OpenBSD, GNU/Hurd, HPUX, Irix, Linux, OSX, NeXT, OSF/DUX, SCO, Solaris, Ultrix, Unixware, Windows, and Unicos
on a Cray T3E.  It also provides support for the debugging of threaded programs.  See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
</p>
<p>The package includes the library, configuration scripts, debug utility application, test program, and documentation.
Online documentation as well as the full source is available at URL <a href="http://dmalloc.com/">http://dmalloc.com/</a>.  Details on the
library&rsquo;s mailing list are available there as well.
</p>
<p>Please use the github issues URL <a href="https://github.com/j256/dmalloc/issues">https://github.com/j256/dmalloc/issues</a> if you have any problems or to request
features.  Please include the version number of the library that you are using, your machine and operating system types,
and the value of the DMALLOC_OPTIONS environment variable.
</p>
<p>Gray Watson.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#License">1. Library License and Copying Information</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     Library license and copying information.
</td></tr>
<tr><td align="left" valign="top"><a href="#Overview">2. Description of Features and How to Get Started</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    Description of features and how to get started.
</td></tr>
<tr><td align="left" valign="top"><a href="#Programming">3. How to Program with the Library</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 How to program with the library.
</td></tr>
<tr><td align="left" valign="top"><a href="#Dmalloc-Program">4. Dmalloc Utility Program</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             How to use the library&rsquo;s utility.
</td></tr>
<tr><td align="left" valign="top"><a href="#Source-Code">5. Information on the Source Code</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Information on the source code.
</td></tr>
<tr><td align="left" valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Some solutions to common problems.
</td></tr>
<tr><td align="left" valign="top"><a href="#Index-of-Concepts">Index of Concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Index of concepts in the manual.
</td></tr>
</table>


<hr size="1">
<a name="License"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Library-License-and-Copying-Information"></a>
<h1 class="chapter">1. Library License and Copying Information</h1>

<a name="index-copying"></a>
<a name="index-license"></a>
<a name="index-isc-license"></a>
<a name="index-open-source-license"></a>
<a name="index-library-permissions"></a>
<a name="index-permissions-of-the-library"></a>

<p>Copyright 1992 to 2020 by Gray Watson.
</p>
<p>Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted,
provided that the above copyright notice and this permission notice appear in all copies.
</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF
THIS SOFTWARE.
</p>

<hr size="6">
<a name="Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#License" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Installation" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#License" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Description-of-Features-and-How-to-Get-Started"></a>
<h1 class="chapter">2. Description of Features and How to Get Started</h1>

<a name="index-overview"></a>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Installation">2.1 How to Install the Library</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                How to install the library.
</td></tr>
<tr><td align="left" valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Getting started with the library.
</td></tr>
<tr><td align="left" valign="top"><a href="#Allocation-Basics">2.3 Basic Description of Terms and Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Basic description of terms and functions.
</td></tr>
<tr><td align="left" valign="top"><a href="#Features">2.4 General Features of the Library</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    General features of the library.
</td></tr>
<tr><td align="left" valign="top"><a href="#How-It-Works">2.5 How the Library Checks Your Program</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                How the library checks your program.
</td></tr>
</table>


<hr size="6">
<a name="Installation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Overview" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-Started" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="How-to-Install-the-Library"></a>
<h2 class="section">2.1 How to Install the Library</h2>

<a name="index-installing-the-library"></a>
<a name="index-compiling-the-library"></a>
<a name="index-building-the-library"></a>
<a name="index-configuring-the-library"></a>
<a name="index-making-the-library"></a>

<p>To configure, compile, and install the library, follow these steps carefully.
</p>
<ol>
<li> Download the latest version of the library available from <a href="http://dmalloc.com/">http://dmalloc.com/</a>.

</li><li> The release files have a &lsquo;<tt>.tgz</tt>&rsquo; file extension which means that they are a tar&rsquo;d gzip&rsquo;d directory of files.
You will need to ungzip and then untar the release file into your source work directory.  You may have to rename the
file to &lsquo;<tt>.tar.gz</tt>&rsquo; to get some old zip programs to handle the file correctly.

<a name="index-settings_002edist-file"></a>

</li><li> You may want to edit or at least review the settings in &lsquo;<tt>settings.dist</tt>&rsquo; to tune specific features of the
library.  The &lsquo;<tt>configure</tt>&rsquo; script will copy this file to &lsquo;<tt>settings.h</tt>&rsquo; which is where you should be adding
per-architecture settings.

<a name="index-configure-script"></a>
<a name="index-_002d_002ddisable_002dcxx"></a>
<a name="index-_002d_002denable_002dthreads"></a>
<a name="index-_002d_002denable_002dshlib"></a>
<a name="index-conf_002eh-file"></a>

</li><li> Type <kbd>sh ./configure</kbd> to configure the library.  You may want to first examine the &lsquo;<tt>config.help</tt>&rsquo; file
for some information about configure.  You may want to use the <kbd>--disable-cxx</kbd> option if you do not want the
Makefile to build the C++ version of dmalloc.  You may want to use the <kbd>--enable-threads</kbd> option to build the
threaded version of dmalloc.  You may want to use the <kbd>--enable-shlib</kbd> option to build the shared versions of the
dmalloc libraries.  <kbd>sh ./configure --help</kbd> lists the available options to configure.  Configure should generate the
&lsquo;<tt>Makefile</tt>&rsquo; and configuration files automatically.

</li><li> You may want to examine the &lsquo;<tt>Makefile</tt>&rsquo; and &lsquo;<tt>conf.h</tt>&rsquo; files created by configure to make sure it did its
job correctly.

<a name="index-settings_002eh-file"></a>

</li><li> You might want to tune the settings in &lsquo;<tt>settings.h</tt>&rsquo; file to tune the library to the local architecture.
This file contains relevant settings if you are using pthreads or another thread library.  See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
The &lsquo;<tt>configure</tt>&rsquo; script created this file from the &lsquo;<tt>settings.dist</tt>&rsquo; file.  Any permanent changes to these
settings should made to the &lsquo;<tt>settings.dist</tt>&rsquo; file.  You then can run &lsquo;<tt>config.status</tt>&rsquo; to re-create the
&lsquo;<tt>settings.h</tt>&rsquo; file.

<a name="index-DMALLOC_005fSIZE-option"></a>

</li><li> The <code>DMALLOC_SIZE</code> variable gets auto-configured in &lsquo;<tt>dmalloc.h.2</tt>&rsquo; but it may not generate correct
settings for all systems.  You may have to alter the definitions in this file to get things to stop complaining when you
go to compile about the size arguments to malloc routines.  Comments on this please.

</li><li> Typing <kbd>make</kbd> should be enough to build &lsquo;<tt>libdmalloc.a</tt>&rsquo;, and &lsquo;<tt>dmalloc</tt>&rsquo; program.  If it does not
work, please see if there are any notes in the contrib directory about your system-type.  If not and you figure your
problem out, please send me some notes so future users can profit from your experiences.

<a name="index-USE_005fRETURN_005fMACROS-conf_002eh-option"></a>

<p><em>NOTE</em>: You may experience some errors compiling some of the &lsquo;<tt>return.h</tt>&rsquo; assembly macros which attempt to
determine the callers address for logging purposes.  See section <a href="#Portability">Issues Important for Porting the Library</a>.  You may want to first try disabling any
compiler optimization flags.  If this doesn&rsquo;t work then you may need to disable the &lsquo;<samp>USE_RETURN_MACROS</samp>&rsquo; variable in
the &lsquo;<tt>settings.h</tt>&rsquo; file.
</p>
<a name="index-ANSI_002dC-compiler"></a>

<p><em>NOTE</em>: The code is dependent on an ANSI-C compiler.  If the configure script gives the &lsquo;<samp>WARNING</samp>&rsquo; that you do
not have an ANSI-C compiler, you may still be able to add some sort of option to your compiler to make it ANSI.  If
there such is an option, please send it to the author so it can be added to the configure script.
</p>
</li><li> If you use threads and did not add the <kbd>--enable-threads</kbd> argument to configure, typing <kbd>make threads</kbd>
should be enough to build &lsquo;<tt>libdmallocth.a</tt>&rsquo; which is the threaded version of the library.  This may or may not work
depending on the configuration scripts ability to detect your local thread functionality.  Feel free to send me mail
with improvements.

<p>See the section of the manual on threads for more information about the operation of the library with your threaded
program.  See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
</p>
</li><li> If you have a C++ compiler installed, the library should have automatically built &lsquo;<tt>libdmallocxx.a</tt>&rsquo; which is
the C++ version of the library.  If it was not done automatically, you can build it by typing <kbd>make cxx</kbd>.  You
should link this library into your C++ programs instead of &lsquo;<tt>libdmalloc.a</tt>&rsquo;.  See the &lsquo;<tt>dmallocc.cc</tt>&rsquo; C++ file
which contains basic code to overload the <code>new</code>, <code>new[]</code>, <code>delete</code>, and <code>delete[]</code> C++ operators.
My apologies on the minimal C++ support.  I am still living in a mostly C world.  Any help improving this interface
without sacrificing portability would be appreciated.

<a name="index-testing-the-library"></a>
<a name="index-dmalloc_005ft-test-program"></a>

</li><li> Typing <kbd>make light</kbd> should build and run the &lsquo;<tt>dmalloc_t</tt>&rsquo; test program through a set of light trials.
By default this will execute &lsquo;<tt>dmalloc_t</tt>&rsquo; 5 times &ndash; each time will execute 10,000 malloc operations in a very
random manner.  Anal folks can type <kbd>make heavy</kbd> to up the ante.  Use <kbd>dmalloc_t --usage</kbd> for the list of all
&lsquo;<tt>dmalloc_t</tt>&rsquo; options.

</li><li> Typing <kbd>make install</kbd> should install the &lsquo;<tt>libdmalloc.a</tt>&rsquo; library in &lsquo;<tt>/usr/local/lib</tt>&rsquo;, the
&lsquo;<tt>dmalloc.h</tt>&rsquo; include file in &lsquo;<tt>/usr/local/include</tt>&rsquo;, and the &lsquo;<tt>dmalloc</tt>&rsquo; utility in &lsquo;<tt>/usr/local/bin</tt>&rsquo;.
You may also want to type <kbd>make installth</kbd> to install the thread library into place and/or <kbd>make installcc</kbd> to
install the C++ library into place.

<p>You may have specified a &lsquo;<samp>--prefix=PATH</samp>&rsquo; option to configure in which case &lsquo;<samp>/usr/local</samp>&rsquo; will have been
replaced with &lsquo;<samp>PATH</samp>&rsquo;.
</p>
</li></ol>

<p>See the &ldquo;Getting Started&rdquo; section to get up and running with the library.  See section <a href="#Getting-Started">Getting Started with the Library</a>.
</p>

<hr size="6">
<a name="Getting-Started"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Installation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Allocation-Basics" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Getting-Started-with-the-Library"></a>
<h2 class="section">2.2 Getting Started with the Library</h2>

<a name="index-quick-start"></a>
<a name="index-getting-started"></a>
<a name="index-jump-start"></a>
<a name="index-how-to-begin"></a>
<a name="index-where-to-begin"></a>
<a name="index-beginning"></a>

<p>This section should give you a quick idea on how to get going.  Basically, you need to do the following things to make
use of the library:
</p>
<ol>
<li> Download the latest version of the library from <a href="http://dmalloc.com/">http://dmalloc.com/</a>.

<a name="index-configure-script-1"></a>

</li><li> Run <kbd>./configure</kbd> to configure the library.  Follow the installation instructions on how to
configure, make, and install the library (i.e. type: <kbd>make install</kbd>).  See section <a href="#Installation">How to Install the Library</a>.

</li><li> Run <kbd>./make install</kbd> to install the library on your system.

<a name="index-automatic-shutdown"></a>
<a name="index-shutdown_002c-automatic"></a>
<a name="index-on_005fexit"></a>
<a name="index-atexit"></a>
<a name="index-destructor"></a>

</li><li> You need to make sure that the library configuration and build process above was able to locate one of the
<code>on_exit</code> function, <code>atexit</code> function, or had compiler destructor support.  If one of these functions or
support is available then the dmalloc library should be able to automatically shut itself down when the program exits.
This causes the memory statistics and unfreed information to be dumped to the log file.  However, if your system has
none of the above, then you will need to call <code>dmalloc_shutdown</code> yourself before your program exits.

<a name="index-alias_002c-shell"></a>
<a name="index-bash-shell"></a>
<a name="index-ksh-shell"></a>
<a name="index-zsh-shell"></a>

</li><li> To get the dmalloc utility to work you need to add an alias for dmalloc to your shell&rsquo;s runtime configuration
file if supported.  The idea is to have the shell capture the dmalloc program&rsquo;s output and adjust the environment.

<p>After you add the alias to the shell config file you need to log out and log back in to have it take effect, or you can
execute the appropriate command below on the command line directly.  After you setup the alias, if you enter
<kbd>dmalloc runtime</kbd> and see any output with DMALLOC_OPTIONS in it then the alias did not take effect.
</p>
<p>Bash, ksh, and zsh (<a href="http://www.zsh.org/">http://www.zsh.org/</a>) users should add the following to their &lsquo;<tt>.bashrc</tt>&rsquo;, &lsquo;<tt>.profile</tt>&rsquo;,
or &lsquo;<tt>.zshrc</tt>&rsquo; file respectively (notice the <kbd>-b</kbd> option for bourne shell output):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">function dmalloc { eval `command dmalloc -b $*`; }
</pre></td></tr></table>

<p>If your shell does not support the <code>command</code> function then try:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">function dmalloc { eval `\dmalloc -b $*`; }
</pre></td></tr></table>
<p>or use a full path to where the dmalloc binary is installed:
</p><table><tr><td>&nbsp;</td><td><pre class="example">function dmalloc { eval `/usr/local/bin/dmalloc -b $*`; }
</pre></td></tr></table>

<a name="index-csh-shell"></a>
<a name="index-tcsh-shell"></a>

<p>If you are still using csh or tcsh, you should add the following to your &lsquo;<tt>.cshrc</tt>&rsquo; file (notice the <kbd>-C</kbd> option
for c-shell output):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">alias dmalloc 'eval `\dmalloc -C \!*`'
</pre></td></tr></table>

<a name="index-rc-shell"></a>

<p>If you are using rc shell, you should add the following to your &lsquo;<tt>.rcrc</tt>&rsquo; file (notice the <kbd>-R</kbd> option for
rc-shell output):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">fn dmalloc {eval `{/usr/local/bin/dmalloc $*}}
</pre></td></tr></table>

</li><li> Although not necessary, you may want to include &lsquo;<tt>dmalloc.h</tt>&rsquo; in your C files and recompile.  This will allow
the library to report the file/line numbers of calls that generate problems.  See section <a href="#Allocation-Macros">Macros Providing File and Line Information</a>.  It should be
inserted at the <em>bottom</em> of your include files as to not conflict with wother includes.  You may want to ifdef it
as well and compile with <kbd>cc -DDMALLOC &hellip;</kbd>:

<table><tr><td>&nbsp;</td><td><pre class="example">/* other includes above ^^^ */

#ifdef DMALLOC
#include &quot;dmalloc.h&quot;
#endif
</pre></td></tr></table>

<a name="index-DMALLOC_005fFUNC_005fCHECK"></a>
</li><li> Another optional task is to compile all of your source with the &lsquo;<tt>dmalloc.h</tt>&rsquo; with the
<code>DMALLOC_FUNC_CHECK</code> compilation flag.  This willallow the library to check all of the arguments of a number of
common string and utility routines.  See section <a href="#Argument-Checking">Checking of Function Arguments</a>.

<table><tr><td>&nbsp;</td><td><pre class="example">cc -DDMALLOC -DDMALLOC_FUNC_CHECK file.c
</pre></td></tr></table>

</li><li> Link the dmalloc library into your program.  The dmalloc library should probably be placed at or near the end
of the library list.

</li><li> Enable the debugging features by typing <kbd>dmalloc -l logfile -i 100 low</kbd> (for example).  You should not see
any messages printed by the dmalloc utility (see NOTE below).  This will:

<ul>
<li> Set the malloc logfile name to &lsquo;<tt>logfile</tt>&rsquo; (<kbd>-l logfile</kbd>). For programs which change directories, you may
want to specify the full path to your logfile.

</li><li> Have the library check itself every 100 iterations (<kbd>-i 100</kbd>).  This controls how fast your program will run.
Larger numbers check the heap less and so it will run faster.  Lower numbers will be more likely to catch memory
problems.

</li><li> Enable a number of debug features (<kbd>low</kbd>).  You can also try <kbd>runtime</kbd> for minimal checking or
<kbd>medium</kbd> or <kbd>high</kbd> for more extensive heap verification.

</li><li> By default, the low, medium, and high values enable the <code>error-abort</code> token which will cause the library to
abort and usually dump core immediately upon seeing an error.  See section <a href="#Dumping-Core">Generating a Core File on Errors</a>.  You can disable this feature by
entering <kbd>dmalloc -m error-abort</kbd> (-m for minus) to remove the <code>error-abort</code> token and your program will just
log errors and continue.

</li></ul>

<p><kbd>dmalloc --usage</kbd> will provide verbose usage info for the dmalloc program.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
<p>You may also want to install the &lsquo;<tt>dmallocrc</tt>&rsquo; file in your home directory as &lsquo;<tt>.dmallocrc</tt>&rsquo;.  This allows you to
add your own combination of debug tokens.  See section <a href="#RC-File">Format of the Runtime Configuration File</a>.
</p>
<p><em>NOTE</em>: The output from the dmalloc utility should be captured by your shell.  If you see a bunch of stuff which
includes the string <code>DMALLOC_OPTIONS</code> then the alias you should have created above is not working and he
environmental variables are not being set.  Make sure you&rsquo;ve logged out and back in to have the alias take effect.
</p>
</li><li> Run your program, examine the logfile that should have been created by <code>dmalloc_shutdown</code>, and use its
information to help debug your program.

</li></ol>


<hr size="6">
<a name="Allocation-Basics"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Getting-Started" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Definitions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Basic-Description-of-Terms-and-Functions"></a>
<h2 class="section">2.3 Basic Description of Terms and Functions</h2>

<a name="index-allocation-basics"></a>
<a name="index-basic-allocation-information"></a>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Basic-Definitions">2.3.1 General Memory Terms and Concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           General memory terms and concepts.
</td></tr>
<tr><td align="left" valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Functionality supported by all malloc libs.
</td></tr>
</table>


<hr size="6">
<a name="Basic-Definitions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Allocation-Basics" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Malloc-Functions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Allocation-Basics" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="General-Memory-Terms-and-Concepts"></a>
<h3 class="subsection">2.3.1 General Memory Terms and Concepts</h3>

<a name="index-basic-definitions"></a>
<a name="index-memory-definitions"></a>

<p>Any program can be divided into 2 logical parts: text and data.  Text is the actual program code in machine-readable
format and data is the information that the text operates on when it is executing.  The data, in turn, can be divided
into 3 logical parts according to where it is stored: <em>static</em>, <em>stack</em>, and <em>heap</em>.
</p>
<a name="index-static-memory"></a>

<p>Static data is the information whose storage space is compiled into the program.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* global variables are allocated as static data */
int numbers[10];

main()
{
   &hellip;
}
</pre></td></tr></table>

<a name="index-stack-memory"></a>

<p>Stack data is data allocated at runtime to hold information used inside of functions.  This data is managed by the
system in the space called stack space.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">void foo()
{
   /* this local variable is stored on the stack */
   float total;
   &hellip;
}

main()
{
   foo();
}
</pre></td></tr></table>

<a name="index-heap-memory"></a>

<p>Heap data is also allocated at runtime and provides a programmer with dynamic memory capabilities.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">main()
{
   /* the address is stored on the stack */
   char * string;
   &hellip;

   /*
    * Allocate a string of 10 bytes on the heap.  Store the
    * address in string which is on the stack.
    */
   string = (char *)malloc(10);
   &hellip;

   /* de-allocate the heap memory now that we're done with it */
   (void)free(string);
   &hellip;
}
</pre></td></tr></table>

<p>It is the heap data that is managed by this library.
</p>
<p>Although the above is an example of how to use the malloc and free commands, it is not a good example of why using the
heap for runtime storage is useful.
</p>
<p>Consider this: You write a program that reads a file into memory, processes it, and displays results.  You would like to
handle files with arbitrary size (from 10 bytes to 1.2 megabytes and more).  One problem, however, is that the entire
file must be in memory at one time to do the calculations.  You don&rsquo;t want to have to allocate 1.2 megabytes when you
might only be reading in a 10 byte file because it is wasteful of system resources.  Also, you are worried that your
program might have to handle files of more than 1.2 megabytes.
</p>
<p>A solution: first check out the file&rsquo;s size and then, using the heap-allocation routines, get enough storage to read the
entire file into memory.  The program will only be using the system resources necessary for the job and you will be
guaranteed that your program can handle any sized file.
</p>

<hr size="6">
<a name="Malloc-Functions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Basic-Definitions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Features" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Allocation-Basics" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Functionality-Supported-by-All-Malloc-Libraries"></a>
<h3 class="subsection">2.3.2 Functionality Supported by All Malloc Libraries</h3>

<a name="index-malloc-functions"></a>

<p>All malloc libraries support 4 basic memory allocation commands.  These include <em>malloc</em>, <em>calloc</em>,
<em>realloc</em>, and <em>free</em>.  For more information about their capabilities, check your system&rsquo;s manual pages &ndash; in
unix, do a <code>man 3 malloc</code>.
</p>
<a name="index-malloc"></a>
<dl>
<dt><a name="index-_002amalloc"></a><u>Function:</u> void <b>*malloc</b><i> ( unsigned int <var>size</var> )</i></dt>
<dd>
<p>Usage: <code>pnt = (type *)malloc(size)</code>
</p>
<p>The malloc routine is the basic memory allocation routine.  It allocates an area of <code>size</code> bytes.  It will return a
pointer to the space requested.
</p>
</dd></dl>
<dl>
<dt><a name="index-_002acalloc"></a><u>Function:</u> void <b>*calloc</b><i> ( unsigned int <var>number</var>, unsigned int<var>size</var> )</i></dt>
<dd><a name="index-calloc"></a>
<a name="index-Allocation-of-zeros"></a>
<a name="index-zeros_002c-allocation-of"></a>

<p>Usage: <code>pnt = (type *)calloc(number, size)</code>
</p>
<p>The calloc routine allocates a certain <code>number</code> of items, each of <code>size</code> bytes, and returns a pointer to the
space.  It is appropriate to pass in a <code>sizeof(type)</code> value as the size argument.
</p>
<p>Also, calloc nulls the space that it returns, assuring that the memory is all zeros.
</p>
</dd></dl>
<dl>
<dt><a name="index-_002arealloc"></a><u>Function:</u> void <b>*realloc</b><i> ( void *<var>old_pnt</var>, unsigned int <var>new_size</var> )</i></dt>
<dd><a name="index-realloc"></a>

<p>Usage: <code>new_pnt = (type *)realloc(old_pnt, new_size)</code>
</p>
<p>The realloc function expands or shrinks the memory allocation in <code>old_pnt</code> to <code>new_size</code> number of bytes.
Realloc copies as much of the information from <code>old_pnt</code> as it can into the <code>new_pnt</code> space it returns, up to
<code>new_size</code> bytes.  If there is a problem allocating this memory, 0L will be returned.
</p>
<p>If the <code>old_pnt</code> is 0L then realloc will do the equivalent of a <code>malloc(new_size)</code>.  If <code>new_size</code> is 0
and <code>old_pnt</code> is not 0L, then it will do the equivalent of <code>free(old_pnt)</code> and will return 0L.
</p>
</dd></dl>
<dl>
<dt><a name="index-free"></a><u>Function:</u> void <b>free</b><i> ( void *<var>pnt</var> )</i></dt>
<dd><a name="index-free-1"></a>

<p>Usage: <code>free(pnt)</code>
</p>
<p>The free routine releases allocation in <code>pnt</code> which was returned by malloc, calloc, or realloc back to the heap.
This allows other parts of the program to re-use memory that is not needed anymore.  It guarantees that the process does
not grow too big and swallow a large portion of the system resources.
</p>
</dd></dl>

<p><em>WARNING</em>: there is a quite common myth that all of the space that is returned by malloc libraries has already been
cleared.  <em>Only</em> the <code>calloc</code> routine will zero the memory space it returns.
</p>

<hr size="6">
<a name="Features"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Malloc-Functions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-It-Works" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="General-Features-of-the-Library"></a>
<h2 class="section">2.4 General Features of the Library</h2>

<a name="index-features"></a>

<p>The debugging features that are available in this debug malloc library can be divided into a couple basic
classifications:
</p>
<dl compact="compact">
<dt> file and line number information</dt>
<dd><a name="index-file_002fline-numbers"></a>
<a name="index-cpp"></a>
<p>One of the nice things about a good debugger is its ability to provide the file and line number of an offending piece of
code.  This library attempts to give this functionality with the help of <em>cpp</em>, the C preprocessor.
See section <a href="#Allocation-Macros">Macros Providing File and Line Information</a>.
</p>
</dd>
<dt> return-address information</dt>
<dd><a name="index-return_002daddress"></a>
<p>To debug calls to the library from external sources (i.e. those files that could not use the allocation macros), some
facilities have been provided to supply the caller&rsquo;s address.  This address, with the help of a debugger, can help you
locate the source of a problem.  See section <a href="#Return-Address">Getting Caller Address Information</a>.
</p>
</dd>
<dt> fence-post (i.e. bounds) checking</dt>
<dd><a name="index-fence_002dpost-checking"></a>
<a name="index-bounds-checking"></a>
<a name="index-checking-bounds"></a>
<p><em>Fence-post</em> memory is the area immediately above or below memory allocations.  It is all too easy to write code
that accesses above or below an allocation &ndash; especially when dealing with arrays or strings.  The library can write
special values in the areas around every allocation so it will notice when these areas have been overwritten.
See section <a href="#Fence_002dPost-Overruns">Diagnosing Fence-Post Overwritten Memory</a>.
</p>
<p><em>NOTE</em>: The library cannot notice when the program <em>reads</em> from these areas, only when it writes values.
Also, fence-post checking will increase the amount of memory the program allocates.
</p>
</dd>
<dt> heap-constancy verification</dt>
<dd><a name="index-constancy-verification"></a>
<p>The administration of the library is reasonably complex.  If any of the heap-maintenance information is corrupted, the
program will either crash or give unpredictable results.
</p>
<p>By enabling heap-consistency checking, the library will run through its administrative structures to make sure all is in
order.  This will mean that problems will be caught faster and diagnosed better.
</p>
<p>The drawback of this is, of course, that the library often takes quite a long time to do this.  It is suitable to enable
this only during development and debugging sessions.
</p>
<p><em>NOTE</em>: the heap checking routines cannot guarantee that the tests will not cause a segmentation-fault if the heap
administration structures are properly (or improperly if you will) overwritten.  In other words, the tests will verify
that everything is okay but may not inform the user of problems in a graceful manner.
</p>
</dd>
<dt> logging statistics</dt>
<dd><a name="index-logging-statistics"></a>
<a name="index-statistics"></a>
<a name="index-memory-leaks"></a>
<a name="index-leaking-memory"></a>
<p>One of the reasons why the debug malloc library was initially developed was to track programs&rsquo; memory usage &ndash;
specifically to locate <em>memory leaks</em> which are places where allocated memory is never getting freed.  See section <a href="#Memory-Leaks">Tracking Down Non-Freed Memory</a>.
</p>
<p>The library has a number of logging capabilities that can track un-freed memory pointers as well as runtime memory
usage, memory transactions, administrative actions, and final statistics.
</p>
</dd>
<dt> examining freed memory</dt>
<dd><a name="index-freed-memory"></a>
<a name="index-freed-memory-1"></a>
<p>Another common problem happens when a program frees a memory pointer but goes on to use it again by mistake.  This can
lead to mysterious crashes and unexplained problems.
</p>
<p>To combat this, the library can write special values into a block of memory after it has been freed.  This serves two
purposes: it will make sure that the program will get garbage data if it trying to access the area again, and it will
allow the library to verify the area later for signs of overwriting.
</p></dd>
</dl>

<p>If any of the above debugging features detect an error, the library will try to recover.  If logging is enabled then an
error will be logged with as much information as possible.
</p>
<p>The error messages that the library displays are designed to give the most information for developers.  If the error
message is not understood, then it is most likely just trying to indicate that a part of the heap has been corrupted.
</p>
<a name="index-dump-core"></a>
<a name="index-core-dump"></a>
<p>The library can be configured to quit immediately when an error is detected and to dump a core file or memory-image.
This can be examined with a debugger to determine the source of the problem.  The library can either stop after dumping
core or continue running.  See section <a href="#Dumping-Core">Generating a Core File on Errors</a>.
</p>
<a name="index-system-memory-problems"></a>
<a name="index-memory-problems-in-system-functions"></a>
<p><em>NOTE</em>: do not be surprised if the library catches problems with your system&rsquo;s routines.  It took me hours to
finally come to the conclusion that the localtime call, included in SunOS release 4.1, overwrites one of its fence-post
markers.
</p>

<hr size="6">
<a name="How-It-Works"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Features" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="How-the-Library-Checks-Your-Program"></a>
<h2 class="section">2.5 How the Library Checks Your Program</h2>

<p>This is one of the newer sections of the library implying that it is incomplete.  If you have any questions or issues
that you&rsquo;d like to see handled here, please let me know.
</p>
<p>The dmalloc library replaces the heap library calls normally found in your system libraries with its own versions.  When
you make a call to malloc (for example), you are calling dmalloc&rsquo;s version of the memory allocation function.  When you
allocate memory with these functions, the dmalloc library keeps track of a number of pieces of debugging information
about your pointer including: where it was allocated, exactly how much memory was requested, when the call was made,
etc..  This information can then be verified when the pointer is freed or reallocated and the details can be logged on
any errors.
</p>
<p>Whenever you reallocate or free a memory address, the dmalloc library always performs a number of checks on the pointer
to make sure that it is valid and has not been corrupted.  You can configure the library to perform additional checks
such as detected fence-post writing.  The library can also be configured to overwrite memory with non-zeros (only if
calloc is not called) when it is allocated and erase the memory when the pointers are freed.
</p>
<a name="index-check_002dheap"></a>
<p>In addition to per-pointer checks, you can configure the library to perform complete heap checks.  These complete checks
verify all internal heap structures and include walking all of the known allocated pointers to verify each one in turn.
You need this level of checking to find random pointers in your program which got corrupted but that won&rsquo;t be freed for
a while.  To turn on these checks, you will need to enable the <code>check-heap</code> debug token.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.  By
default this will cause the heap to be fully checked each and every time dmalloc is called whether it is a malloc, free,
realloc, or another dmalloc overloaded function.
</p>
<p>Performing a full heap check can take a good bit of CPU and it may be that you will want to run it sporadically.  This
can be accomplished in a couple different ways including the &rsquo;-i&rsquo; interval argument to the dmalloc utility.
See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.  This will cause the check to be run every N-th time.  For instance, &rsquo;dmalloc -i 3&rsquo; will cause
the heap to be checked before every 3rd call to a memory function.  Values of 100 or even 1000 for high memory usage
programs are more useful than smaller ones.
</p>
<a name="index-LOG_005fITERATION_005fCOUNT"></a>
<a name="index-iteration-count"></a>
<a name="index-memory-transaction-count"></a>
<p>You can also cause the program to start doing detailed heap checking after a certain point.  For instance, with &rsquo;dmalloc
-s 1000&rsquo; option, you can tell the dmalloc library to enable the heap checks after the 1000th memory call.  Examine the
dmalloc log file produced and use the iteration count if you have <code>LOG_ITERATION_COUNT</code> enabled in your
&lsquo;<tt>settings.h</tt>&rsquo; file.
</p>
<p>The start option can also have the format &lsquo;<samp>file:line</samp>&rsquo;.  For instance, if it is set to &lsquo;<samp>dmalloc_t.c:126</samp>&rsquo;,
dmalloc will start checking the heap after it sees a dmalloc call from the &lsquo;<tt>dmalloc_t.c</tt>&rsquo; file, line number 126.  If
you use &lsquo;<samp>dmalloc_t.c:0</samp>&rsquo;, with a 0 line number, then dmalloc will start checking the heap after it sees a call from
anywhere in the &lsquo;<tt>dmalloc_t.c</tt>&rsquo; file.
</p>

<hr size="6">
<a name="Programming"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#How-It-Works" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Allocation-Macros" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="How-to-Program-with-the-Library"></a>
<h1 class="chapter">3. How to Program with the Library</h1>

<a name="index-programming"></a>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Macros providing file and line information.
</td></tr>
<tr><td align="left" valign="top"><a href="#Return-Address">3.2 Getting Caller Address Information</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Getting caller address information.
</td></tr>
<tr><td align="left" valign="top"><a href="#Argument-Checking">3.3 Checking of Function Arguments</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Checking of function arguments.
</td></tr>
<tr><td align="left" valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Generating a core file on errors for debugging.
</td></tr>
<tr><td align="left" valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Additional non-standard routines.
</td></tr>
<tr><td align="left" valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Description of the internal error numbers.
</td></tr>
<tr><td align="left" valign="top"><a href="#Disabling-the-Library">3.7 How to Disable the library</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      How to disable the library.
</td></tr>
<tr><td align="left" valign="top"><a href="#Using-With-C_002b_002b">3.8 Using the Library with C++</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Using the library with C++.
</td></tr>
<tr><td align="left" valign="top"><a href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Using a debugger with the library.
</td></tr>
<tr><td align="left" valign="top"><a href="#Using-With-Threads">3.10 Using the Library with a Thread Package</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Using the library with a thread package.
</td></tr>
<tr><td align="left" valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Debugging memory in a server or cgi-bin process.
</td></tr>
<tr><td align="left" valign="top"><a href="#Logfile-Details">3.13 Explanation of the Logfile Output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#Other-Hints">3.14 Various Other Hints That May Help</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Various other hints that may help.
</td></tr>
</table>


<hr size="6">
<a name="Allocation-Macros"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Programming" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Return-Address" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Macros-Providing-File-and-Line-Information"></a>
<h2 class="section">3.1 Macros Providing File and Line Information</h2>

<a name="index-allocation-macros"></a>
<a name="index-macros_002c-allocation"></a>
<a name="index-dmalloc_002eh-file"></a>

<p>By including &lsquo;<tt>dmalloc.h</tt>&rsquo; in your C files, your calls to malloc, calloc, realloc, recalloc, memalign, valloc,
strdup, and free are replaced with calls to _dmalloc_malloc, _dmalloc_realloc, and _dmalloc_free with various flags.
Additionally the library replaces calls to xmalloc, xcalloc, xrealloc, xrecalloc, xmemalign, xvalloc, xstrdup, and xfree
with associated calls.
</p>
<p>These macros use the c-preprocessor <code>__FILE__</code> and <code>__LINE__</code> macros which get replaced at compilation time
with the current file and line-number of the source code in question.  The routines use this information to produce
verbose reports on memory problems.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">not freed: '0x38410' (22 bytes) from 'dmalloc_t.c:92'
</pre></td></tr></table>

<p>This line from a log file shows that memory was not freed from file &lsquo;<tt>dmalloc_t.c</tt>&rsquo; line 92.  See section <a href="#Memory-Leaks">Tracking Down Non-Freed Memory</a>.
</p>
<a name="index-recalloc"></a>
<a name="index-memalign"></a>
<a name="index-valloc"></a>
<a name="index-strdup"></a>

<p>You may notice some non standard memory allocation functions in the above list.  Recalloc is a routine like realloc that
reallocates previously allocated memory to a new size.  If the new memory size is larger than the old, recalloc
initializes the new space to all zeros.  This may or may not be supported natively by your operating system.  Memalign
is like malloc but should insure that the returned pointer is aligned to a certain number of specified bytes.
Currently, the memalign function is not supported by the library.  It defaults to returning possibly non-aligned memory
for alignment values less than a block-size.  Valloc is like malloc but insures that the returned pointer will be
aligned to a page boundary.  This may or may not be supported natively by your operating system but is fully supported
by the library.  Strdup is a string duplicating routine which takes in a null terminated string pointer and returns an
allocated copy of the string that will need to be passed to free later to deallocate.
</p>
<p>The X versions of the standard memory functions (xmalloc, xfree, etc.)  will print out an error message to standard
error and will stop if the library is unable to allocate any additional memory.  It is useful to use these routines
instead of checking everywhere in your program for allocation routines returning NULL pointers.
</p>
<p><em>WARNING</em>: If you are including the &lsquo;<tt>dmalloc.h</tt>&rsquo; file in your sources, it is recommended that it be at the end
of your include file list because dmalloc uses macros and may try to change declarations of the malloc functions if they
come after it.
</p>

<hr size="6">
<a name="Return-Address"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Allocation-Macros" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Argument-Checking" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Getting-Caller-Address-Information"></a>
<h2 class="section">3.2 Getting Caller Address Information</h2>

<a name="index-caller_0027s-address"></a>
<a name="index-return_002daddress-1"></a>
<a name="index-return_002eh-file"></a>
<a name="index-ra"></a>

<p>Even though the allocation macros can provide file/line information for some of your code, there are still modules which
either you can&rsquo;t include &lsquo;<tt>dmalloc.h</tt>&rsquo; (such as library routines) or you just don&rsquo;t want to.  You can still get
information about the routines that call dmalloc function from the return-address information.  To accomplish this, you
must be using this library on one of the supported architecture/compilers.  See section <a href="#Portability">Issues Important for Porting the Library</a>.
</p>
<a name="index-assembly-hacks"></a>

<p>The library attempts to use some assembly hacks to get the return-address or the address of the line that called the
dmalloc function.  If you have unfreed memory that does not have associated file and line information, you might see the
following non-freed memory messages.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">not freed: '0x38410' (22 bytes) from 'ra=0xdd2c'
not freed: '0x38600' (10232 bytes) from 'ra=0x10234d'
not freed: '0x38220' (137 bytes) from 'ra=0x82cc'
</pre></td></tr></table>

<a name="index-ra_005finfo_002epl"></a>
<p>With the help of a debugger, these return-addresses (or ra) can then be identified.  I&rsquo;ve provided a &lsquo;<tt>ra_info.pl</tt>&rsquo;
perl script in the &lsquo;<tt>contrib/</tt>&rsquo; directory with the dmalloc sources which seems to work well with gdb.  You can also
use manual methods for gdb to find the return-address location.  See section <a href="#Translate-Return-Addresses">Translating Return Addresses into Code Locations</a>.
</p>

<hr size="6">
<a name="Argument-Checking"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Return-Address" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dumping-Core" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Checking-of-Function-Arguments"></a>
<h2 class="section">3.3 Checking of Function Arguments</h2>

<a name="index-argument-checking"></a>
<a name="index-checking-arguments"></a>
<a name="index-DMALLOC_005fFUNC_005fCHECK-flag"></a>

<p>One potential problem with the library and its multitude of checks and diagnoses is that they only get performed when a
dmalloc function is called.  One solution this is to include &lsquo;<tt>dmalloc.h</tt>&rsquo; and compile your source code with the
<code>DMALLOC_FUNC_CHECK</code> flag defined and enable the <code>check-funcs</code> token.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">cc -DDMALLOC -DDMALLOC_FUNC_CHECK file.c
</pre></td></tr></table>

<p><em>NOTE</em>: Once you have compiled your source with DMALLOC_FUNC_CHECK enabled, you will have to recompile with it off
to disconnect the library.  See section <a href="#Disabling-the-Library">How to Disable the library</a>.
</p>
<p><em>WARNING</em>: You should be sure to have &lsquo;<tt>dmalloc.h</tt>&rsquo; included at the end of your include file list because
dmalloc uses macros and may try to change declarations of the checked functions if they come after it.
</p>
<p>When this is defined dmalloc will override a number of functions and will insert a routine which knows how to check its
own arguments and then call the real function.  Dmalloc can check such functions as <code>bcopy</code>, <code>index</code>,
<code>strcat</code>, and <code>strcasecmp</code>.  For the full list see the end of &lsquo;<tt>dmalloc.h</tt>&rsquo;.
</p>
<p>When you call <code>strlen</code>, for instance, dmalloc will make sure the string argument&rsquo;s fence-post areas have not been
overwritten, its file and line number locations are good, etc.  With <code>bcopy</code>, dmalloc will make sure that the
destination string has enough space to store the number of bytes specified.
</p>
<p>For all of the arguments checked, if the pointer is not in the heap then it is ignored since dmalloc does not know
anything about it.
</p>

<hr size="6">
<a name="Dumping-Core"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Argument-Checking" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Extensions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Generating-a-Core-File-on-Errors"></a>
<h2 class="section">3.4 Generating a Core File on Errors</h2>

<a name="index-dump-core-1"></a>
<a name="index-core-dump-1"></a>
<a name="index-generating-core-dump"></a>
<a name="index-error_002dabort"></a>
<a name="index-error_002ddump"></a>
<a name="index-debugger"></a>

<p>If the <code>error-abort</code> debug token has been enabled, when the library detects any problems with the heap memory, it
will immediately attempt to dump a core file.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.  Core files are a complete copy of the program and
it&rsquo;s state and can be used by a debugger to see specifically what is going on when the error occurred.  See section <a href="#Using-With-a-Debugger">Using Dmalloc With a Debugger</a>.  By default, the low, medium, and high arguments to the library utility enable the <code>error-abort</code>
token.  You can disable this feature by entering <kbd>dmalloc -m error-abort</kbd> (-m for minus) to remove the
<code>error-abort</code> token and your program will just log errors and continue.  You can also use the <code>error-dump</code>
token which tries to dump core when it sees an error but still continue running.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.
</p>
<a name="index-core-file"></a>
<a name="index-program-core"></a>
<a name="index-no-core-dump"></a>
<a name="index-core-dump_002c-none"></a>
<a name="index-missing-core-dump"></a>

<p>When a program dumps core, the system writes the program and all of its memory to a file on disk usually named
&lsquo;<tt>core</tt>&rsquo;.  If your program is called &lsquo;<tt>foo</tt>&rsquo; then your system may dump core as &lsquo;<tt>foo.core</tt>&rsquo;.  If you are not
getting a &lsquo;<tt>core</tt>&rsquo; file, make sure that your program has not changed to a new directory meaning that it may have
written the core file in a different location.  Also insure that your program has write privileges over the directory
that it is in otherwise it will not be able to dump a core file.  Core dumps are often security problems since they
contain all program memory so systems often block their being produced.  You will want to check your user and system&rsquo;s
core dump size ulimit settings.
</p>
<a name="index-abort"></a>
<a name="index-kill-process"></a>
<a name="index-KILL_005fPROCESS"></a>

<p>The library by default uses the <code>abort</code> function to dump core which may or may not work depending on your operating
system.  If the following program does not dump core then this may be the problem.  See <code>KILL_PROCESS</code> definition
in &lsquo;<tt>settings.dist</tt>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">main()
{
   abort();
}
</pre></td></tr></table>

<p>If <code>abort</code> does work then you may want to try the following setting in &lsquo;<tt>settings.dist</tt>&rsquo;.  This code tries to
generate a segmentation fault by dereferencing a <code>NULL</code> pointer.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#define KILL_PROCESS    { int *_int_p = 0L; *_int_p = 1; }
</pre></td></tr></table>


<hr size="6">
<a name="Extensions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dumping-Core" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Error-Codes" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Additional-Non_002dstandard-Routines"></a>
<h2 class="section">3.5 Additional Non-standard Routines</h2>

<a name="index-extensions"></a>

<p>The library has a number of variables that are not a standard part of most malloc libraries:
</p>

<a name="index-dmalloc_005ferrno-number"></a>
<a name="index-internal-error-number"></a>
<a name="index-error-number"></a>

<dl>
<dt><a name="index-dmalloc_005ferrno"></a><u>Variable:</u> int <b>dmalloc_errno</b></dt>
<dd>
<p>This variable stores the internal dmalloc library error number like errno does for the system calls.  It can be passed
to <code>dmalloc_strerror()</code> (see below) to get a string version of the error.  It will have a value of zero if the
library has not detected any problems.
</p>
</dd></dl>


<a name="index-dmalloc_005flogpath-variable"></a>
<a name="index-logfile-name"></a>

<dl>
<dt><a name="index-dmalloc_005flogpath"></a><u>Variable:</u> char* <b>dmalloc_logpath</b></dt>
<dd>
<p>This variable can be used to set the dmalloc log filename.  The env variable <code>DMALLOC_LOGFILE</code> overrides this
variable.
</p>

</dd></dl>

<p>Additionally the library provides a number of non-standard malloc routines:
</p>

<a name="index-dmalloc_005fshutdown-function"></a>
<a name="index-shutdown-the-library"></a>

<dl>
<dt><a name="index-dmalloc_005fshutdown"></a><u>Function:</u> void <b>dmalloc_shutdown</b><i> ( void )</i></dt>
<dd>
<a name="index-atexit-function"></a>
<a name="index-on_005fexit-function"></a>

<p>This function shuts the library down and logs the final statistics and information especially the non-freed memory
pointers.  The library has code to support auto-shutdown if your system has the <code>on_exit()</code> call, <code>atexit()</code>
call, or compiler destructor support (see &lsquo;<tt>conf.h</tt>&rsquo;).  If you do not have these, then <code>dmalloc_shutdown</code> should
be called right before <code>exit()</code> or as the last function in <code>main()</code>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">main()
{
   &hellip;
   dmalloc_shutdown();
   exit(0);
}
</pre></td></tr></table>
</dd></dl>


<a name="index-dmalloc_005fverify-function"></a>
<a name="index-verify-pointers"></a>
<a name="index-verify-the-heap"></a>

<dl>
<dt><a name="index-dmalloc_005fverify"></a><u>Function:</u> int <b>dmalloc_verify</b><i> ( char * <var>pnt</var> )</i></dt>
<dd>
<p>This function verifies individual memory pointers that are suspect of memory problems.  To check the entire heap pass in
a NULL or 0 pointer.  The routine returns DMALLOC_VERIFY_ERROR or DMALLOC_VERIFY_NOERROR.
</p>
<p><em>NOTE</em>: &lsquo;<samp>dmalloc_verify()</samp>&rsquo; can only check the heap with the functions that have been enabled.  For example, if
fence-post checking is not enabled, &lsquo;<samp>dmalloc_verify()</samp>&rsquo; cannot check the fence-post areas in the heap.
</p></dd></dl>


<a name="index-dmalloc_005fdebug-function"></a>
<a name="index-override-debug-settings"></a>
<a name="index-set-debug-functionality-flags"></a>

<dl>
<dt><a name="index-dmalloc_005fdebug"></a><u>Function:</u> unsigned-int <b>dmalloc_debug</b><i> ( const unsigned int <var>flags</var> )</i></dt>
<dd>
<p>This routine sets the debug functionality flags and returns the previous flag value.  It is helpful in server or cgi-bin
programs where environmental variables cannot be used.  See section <a href="#Debugging-A-Server">Debugging Memory in a Server or Cgi-Bin Process</a>.  For instance, if debugging should
never be enabled for a program, a call to <code>dmalloc_debug(0)</code> as the first call in <code>main()</code> will disable all
the memory debugging from that point on.
</p>
<p><em>NOTE</em>: you cannot add or remove certain flags such as signal handlers since they are setup at initialization time
only.
</p>
<p><em>NOTE</em>: you can also use <code>dmalloc_debug_setup</code> below.
</p>
</dd></dl>


<a name="index-dmalloc_005fdebug_005fcurrent-function"></a>
<a name="index-current-debug-value"></a>

<dl>
<dt><a name="index-dmalloc_005fdebug_005fcurrent"></a><u>Function:</u> unsigned-int <b>dmalloc_debug_current</b><i> ( void )</i></dt>
<dd>
<p>This routine returns the current debug functionality value value.  This allows you to save a copy of the debug dmalloc
settings to be changed and then restored later.
</p>
</dd></dl>


<a name="index-dmalloc_005fdebug_005fsetup"></a>
<a name="index-override-debug-settings-1"></a>
<a name="index-set-debug-functionality-flags-1"></a>
<a name="index-setup-debug-flags"></a>
<a name="index-string-of-debug-tokens"></a>

<dl>
<dt><a name="index-dmalloc_005fdebug_005fsetup-1"></a><u>Function:</u> void <b>dmalloc_debug_setup</b><i> ( const char * <var>options_str</var> )</i></dt>
<dd>
<p>This routine sets the global debugging functionality as an option string.  Normally this would be passed in in the
DMALLOC_OPTIONS environmental variable.  This is here to override the env or for circumstances where modifying the
environment is not possible or does not apply such as servers or cgi-bin programs.  See section <a href="#Debugging-A-Server">Debugging Memory in a Server or Cgi-Bin Process</a>.
</p>
<p>Some examples:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/*
 * debug tokens high, threaded lock-on at 20,
 * log to dmalloc.%p (pid)
 */
dmalloc_debug_setup(&quot;debug=0x4f46d03,lockon=20,log=dmalloc.%p&quot;);

/*
 * turn on some debug tokens directly and log to the
 * file 'logfile'
 */
dmalloc_debug_setup(
  &quot;log-stats,log-non-free,check-fence,log=logfile&quot;);
</pre></td></tr></table>

</dd></dl>


<a name="index-dmalloc_005fexamine-function"></a>
<a name="index-examine-a-pointer"></a>
<a name="index-pointer-information"></a>

<dl>
<dt><a name="index-dmalloc_005fexamine"></a><u>Function:</u> int <b>dmalloc_examine</b><i> ( const DMALLOC_PNT <var>pnt</var>, DMALLOC_SIZE * <var>user_size_p</var>, DMALLOC_SIZE * <var>total_size_p</var>, char ** <var>file_p</var>, int * <var>line_p</var>, DMALLOC_PNT * <var>ret_addr_p</var>, unsigned long * <var>user_mark_p</var>, unsigned long * <var>seen_p</var> )</i></dt>
<dd>
<a name="index-seen-count"></a>
<p>This function returns the size of a pointer&rsquo;s allocation as well as the total size given including administrative
overhead, file and line or the return-address from where it was allocated, the last pointer when the pointer was &quot;used&quot;,
and the number of times the pointer has been &quot;seen&quot;.  It will return DMALLOC_NOERROR or DMALLOC_ERROR depending on
whether pnt is good or not.
</p>
<p><em>NOTE</em>: This function is <em>certainly</em> not provided by most if not all other malloc libraries.
</p>
</dd></dl>


<a name="index-dmalloc_005ftrack-function"></a>
<a name="index-track-memory-calls"></a>

<dl>
<dt><a name="index-dmalloc_005ftrack"></a><u>Function:</u> void <b>dmalloc_track</b><i> ( const dmalloc_track_t <var>track_func</var> )</i></dt>
<dd>
<p>Register an allocation tracking function which will be called each time an allocation occurs.  Pass in NULL to disable.
To take a look at what information is provided, see the dmalloc_track_t function typedef in dmalloc.h.
</p>
</dd></dl>


<a name="index-dmalloc_005fmark-function"></a>
<a name="index-memory-position-marker"></a>
<a name="index-mark-memory-position"></a>
<a name="index-LOG_005fITERATION"></a>
<a name="index-interaction-count"></a>
<a name="index-transaction-count"></a>

<dl>
<dt><a name="index-dmalloc_005fmark"></a><u>Function:</u> unsigned-long <b>dmalloc_mark</b><i> ( void )</i></dt>
<dd>
<p>Return to the caller the current &quot;mark&quot; which can be used later to log the pointers which have changed since this mark
with the <code>dmalloc_log_changed</code> function.  Multiple marks can be saved and used.
</p>
<p>This is very useful when using the library with a server which does not exit.  You can then save a mark before a
transaction or event happens and then check to see what has changed using the <code>dmalloc_log_changed</code> function below.
See section <a href="#Debugging-A-Server">Debugging Memory in a Server or Cgi-Bin Process</a>.
</p>
<p>If you <code>LOG_ITERATION</code> enabled in your &lsquo;<tt>settings.h</tt>&rsquo; file then the entries in the log file will be prepended
with the number of memory transactions that the library has handled so far.  You can also enable
<code>LOG_PNT_ITERATION</code> in &lsquo;<tt>settings.h</tt>&rsquo; to store the memory transaction number with each pointer.
</p>
</dd></dl>


<a name="index-dmalloc_005fmemory_005fallocated-function"></a>
<a name="index-memory-allocated-function"></a>
<a name="index-number-of-bytes-allocated"></a>

<dl>
<dt><a name="index-dmalloc_005fmemory_005fallocated"></a><u>Function:</u> unsigned-long <b>dmalloc_memory_allocated</b><i> ( void )</i></dt>
<dd>
<p>Return to the caller the total number of bytes that have been allocated by the library.  This is not the current in use
but the total number of bytes returned by allocation functions.
</p>
</dd></dl>


<a name="index-page-size"></a>
<a name="index-size-of-memory-pages"></a>

<dl>
<dt><a name="index-dmalloc_005fpage_005fsize"></a><u>Function:</u> unsigned-int <b>dmalloc_page_size</b><i> ( void )</i></dt>
<dd>
<p>Return to the caller the memory page-size being used by the library.  This should be the same value as the one returned
by the <code>getpagesize()</code> function, if available.
</p>
</dd></dl>


<a name="index-count-changed"></a>
<a name="index-count-number-of-bytes-changed-since-mark"></a>
<a name="index-number-bytes-changed-since-mark"></a>

<dl>
<dt><a name="index-dmalloc_005fcount_005fchanged"></a><u>Function:</u> unsigned-long <b>dmalloc_count_changed</b><i> ( const unsigned long <var>mark</var>, const int <var>not_freed_b</var>, const int <var>free_b</var> )</i></dt>
<dd>
<p>Count the pointers that have changed since the mark which was returned by <code>dmalloc_mark</code>.  If <code>not_freed_b</code> is
set to non-0 then count the pointers that have not been freed.  If <code>free_b</code> is set to non-0 then count the pointers
that have been freed.
</p>
<p>This can be used in conjunction with the <code>dmalloc_mark()</code> function to help servers which never exit ensure that
transactions or events are not leaking memory.  See section <a href="#Debugging-A-Server">Debugging Memory in a Server or Cgi-Bin Process</a>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">unsigned long mark = dmalloc_mark() ;
&hellip;
assert(dmalloc_count_changed(mark, 1, 0) == 0) ;
</pre></td></tr></table>

</dd></dl>


<a name="index-dmalloc_005flog_005fstats-function"></a>
<a name="index-log-statistics"></a>
<a name="index-statistics-logging"></a>

<dl>
<dt><a name="index-dmalloc_005flog_005fstats"></a><u>Function:</u> void <b>dmalloc_log_stats</b><i> ( void )</i></dt>
<dd>
<p>This routine outputs the current dmalloc statistics to the log file.
</p></dd></dl>


<a name="index-dmalloc_005flog_005funfreed-function"></a>
<a name="index-log-unfreed-memory"></a>
<a name="index-unfreed-memory-log"></a>

<dl>
<dt><a name="index-dmalloc_005flog_005funfreed"></a><u>Function:</u> void <b>dmalloc_log_unfreed</b><i> ( void )</i></dt>
<dd>
<p>This function logs the unfreed-memory information to the log file.  This is also useful to log the currently allocated
points to the log file to be compared against another dump later on.
</p>
</dd></dl>


<a name="index-dmalloc_005flog_005fchanged-function"></a>
<a name="index-changed-memory-log"></a>
<a name="index-checkpoint-memory-usage"></a>
<a name="index-log-memory-changes"></a>

<dl>
<dt><a name="index-dmalloc_005flog_005fchanged"></a><u>Function:</u> void <b>dmalloc_log_changed</b><i> ( const unsigned long <var>mark</var>, const int <var>not_freed_b</var>, const int <var>freed_b</var>, const int <var>details_b</var> )</i></dt>
<dd>
<p>Log the pointers that have changed since the mark which was returned by <code>dmalloc_mark</code>.  If <code>not_freed_b</code> is
set to non-0 then log the pointers that have not been freed.  If <code>free_b</code> is set to non-0 then log the pointers
that have been freed.  If <code>details_b</code> set to non-0 then log the individual pointers that have changed otherwise
just log the summaries.
</p>
<p>This can be used in conjunction with the <code>dmalloc_mark()</code> function to help servers which never exit find
transactions or events which are leaking memory.  See section <a href="#Debugging-A-Server">Debugging Memory in a Server or Cgi-Bin Process</a>.
</p>
</dd></dl>


<a name="index-dmalloc_005fvmessage-function"></a>
<a name="index-write-message-to-logfile"></a>
<a name="index-logfile-message-writer"></a>

<dl>
<dt><a name="index-dmalloc_005fvmessage"></a><u>Function:</u> void <b>dmalloc_vmessage</b><i> ( const char * <var>format</var>, va_list <var>args</var> )</i></dt>
<dd>
<p>Write a message into the dmalloc logfile using vprintf-like arguments.
</p>
</dd></dl>


<a name="index-dmalloc_005fmessage-function"></a>
<a name="index-write-message-to-logfile-1"></a>
<a name="index-logfile-message-writer-1"></a>

<dl>
<dt><a name="index-dmalloc_005fmessage"></a><u>Function:</u> void <b>dmalloc_message</b><i> ( const char * <var>format</var>, <var>...</var> )</i></dt>
<dd>
<p>Write a message into the dmalloc logfile using printf-like arguments.
</p>
</dd></dl>


<a name="index-dmalloc_005fget_005fstats-function"></a>
<a name="index-get-heap-statistics"></a>
<a name="index-heap-statistics-function"></a>
<a name="index-report-heap-statistics"></a>

<dl>
<dt><a name="index-dmalloc_005fget_005fstats"></a><u>Function:</u> void <b>dmalloc_get_stats</b><i> ( DMALLOC_PNT * <var>heap_low_p</var>, DMALLOC_PNT * <var>heap_high_p</var>, unsigned long * <var>total_space_p</var>, unsigned long * <var>user_space_p</var>, unsigned long * <var>current_allocated_p</var>, unsigned long * <var>current_pnt_np</var>, unsigned long * <var>max_allocated_p</var>, unsigned long * <var>max_pnt_np</var>, unsigned long * <var>max_one_p</var>)</i></dt>
<dd>
<p>This function return a number of statistics about the current heap.  The pointers <code>heap_low_p</code> and
<code>heap_high_p</code> will be set to the low and high spots in the heap.  <code>total_space_p</code> will be set to the total
space in the heap including user space, administrative space, and overhead.  <code>user_space_p</code> will be set to the
space given to the user process (allocated and free space).  <code>current_allocated_p</code> will be set to the current
allocated space given to the user process.  <code>current_pnt_np</code> will be set to the current number of pointers
allocated by the user process.  <code>max_allocated_p</code> will be set to the maximum allocated space given to the user
process.  <code>max_pnt_np</code> will be set to the maximum number of pointers allocated by the user process.
<code>max_on_p</code> will be set to the maximum space allocated with one call by the user process.
</p>
</dd></dl>


<a name="index-dmalloc_005fstrerror-function"></a>
<a name="index-string-error-message"></a>
<a name="index-error-message"></a>

<dl>
<dt><a name="index-dmalloc_005fstrerror"></a><u>Function:</u> const-char* <b>dmalloc_strerror</b><i> ( const int <var>error_number</var> )</i></dt>
<dd>
<p>This function returns the string representation of the error value in <code>error_number</code> (which probably should be
dmalloc_errno).  This allows the logging of more verbose memory error messages.
</p>
<p>You can also display the string representation of an error value by a call to the &lsquo;<tt>dmalloc</tt>&rsquo; program with a &lsquo;<samp>-e
#</samp>&rsquo; option.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
</dd></dl>


<hr size="6">
<a name="Error-Codes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Extensions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Disabling-the-Library" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Description-of-the-Internal-Error-Codes"></a>
<h2 class="section">3.6 Description of the Internal Error Codes</h2>

<a name="index-error-codes"></a>

<p>The following error codes are defined in &lsquo;<tt>error_val.h</tt>&rsquo;.  They are used by the library to indicate a detected
problem.  They can be caused by the user (&lsquo;<samp>ERROR_TOO_BIG</samp>&rsquo;) or can indicate an internal library problem
(&lsquo;<samp>ERROR_SLOT_CORRUPT</samp>&rsquo;).  The &lsquo;<tt>dmalloc</tt>&rsquo; utility can give you the string version of the error with the <code>-e</code>
argument:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$ dmalloc -e 60
dmalloc: dmalloc_errno value '60' = 
   'pointer is not on block boundary'
</pre></td></tr></table>

<p>Here are the error codes set by the library.  They are non contiguous on purpose because I add and delete codes all of
the time and there are sections for various error-code types.
</p>
<dl compact="compact">
<dd>

<a name="index-1_002c-error-code"></a>
<a name="index-error-code_002c-1"></a>
<a name="index-no-error"></a>
<a name="index-ERROR_005fNONE"></a>

</dd>
<dt> <code>1 (ERROR_NONE) no error</code></dt>
<dd><p>No error.  It is good coding practice to set the no-error code to be non-0 value because it forces you to set it
explicitly.
</p>

<a name="index-2_002c-error-code"></a>
<a name="index-error-code_002c-2"></a>
<a name="index-invalid-errno-value"></a>
<a name="index-errno-value-is-not-valid"></a>
<a name="index-INVALID_005fERROR"></a>

</dd>
<dt> <code>2 (INVALID_ERROR)</code></dt>
<dd><p>Invalid error number.  If the library outputs this error then your dmalloc utility may be out of date with the library
you linked against.  This will be returned with all error codes not listed here.
</p>

<a name="index-10_002c-error-code"></a>
<a name="index-error-code-10"></a>
<a name="index-initialization-and-setup-failed"></a>
<a name="index-bad-setup-error"></a>
<a name="index-ERROR_005fBAD_005fSETUP"></a>

</dd>
<dt> <code>10 (ERROR_BAD_SETUP) initialization and setup failed</code></dt>
<dd><p>Bad setup value.  This is currently unused but it is intended to report on invalid setup configuration information.
</p>

<a name="index-lock_002don"></a>
<a name="index-recursion"></a>
<a name="index-in-twice-error"></a>
<a name="index-11_002c-error-code"></a>
<a name="index-error-code-11"></a>
<a name="index-malloc-library-has-gone-recursive"></a>
<a name="index-ERROR_005fIN_005fTWICE"></a>

</dd>
<dt> <code>11 (ERROR_IN_TWICE) malloc library has gone recursive</code></dt>
<dd><p>Library went recursive.  This usually indicates that you are not using the threaded version of the library.  Or if you
are then you are not using the &lsquo;<samp>-o</samp>&rsquo; &quot;lock-on&quot; option.  See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
</p>

<a name="index-lock_002don-not-configured"></a>
<a name="index-13_002c-error-code"></a>
<a name="index-error-code-13"></a>
<a name="index-thread-locking-has-not-been-configured"></a>
<a name="index-ERROR_005fLOCK_005fNOT_005fCONFIG"></a>

</dd>
<dt> <code>13 (ERROR_LOCK_NOT_CONFIG) thread locking has not been configured</code></dt>
<dd><p>Thread locking has not been configured.  This indicates that you attempted to use the &lsquo;<samp>-o</samp>&rsquo; &quot;lock-on&quot; option without
linking with the thread version of the library.  You should probably be using <code>-ldmallocth</code> <em>not</em>
<code>-ldmalloc</code> when you are linking.  Or you should include <code>&hellip;/lib/libdmallocth.a</code> on your compilation
line.
</p>

<a name="index-error_002dfree_002dnull-token"></a>
<a name="index-free-null-token"></a>
<a name="index-20_002c-error-code"></a>
<a name="index-error-code-20"></a>
<a name="index-pointer-is-null-error"></a>
<a name="index-is-null-error"></a>
<a name="index-ERROR_005fIS_005fNULL"></a>

</dd>
<dt> <code>20 (ERROR_IS_NULL) pointer is null</code></dt>
<dd><p>Pointer is null.  The program passed a NULL (0L) pointer to <code>free</code> and you have the <code>error-free-null</code> token
enabled.
</p>

<a name="index-pointer-not-in-heap-error"></a>
<a name="index-not-in-heap-error"></a>
<a name="index-21_002c-error-code"></a>
<a name="index-error-code-21"></a>
<a name="index-pointer-is-not-pointing-to-heap-data-space"></a>
<a name="index-ERROR_005fNOT_005fIN_005fHEAP"></a>

</dd>
<dt> <code>21 (ERROR_NOT_IN_HEAP) pointer is not pointing to heap data space</code></dt>
<dd><p>Pointer is not pointing to heap data space.  This means that the program passed an out-of-bounds pointer to <code>free</code>
or <code>realloc</code>.  This could be someone trying to work with a wild pointer or trying to free a pointer from a
different source than <code>malloc</code>.
</p>

<a name="index-not-found-error"></a>
<a name="index-pointer-not-found-error"></a>
<a name="index-22_002c-error-code"></a>
<a name="index-error-code-22"></a>
<a name="index-cannot-locate-pointer-in-heap"></a>
<a name="index-ERROR_005fNOT_005fFOUND"></a>
<a name="index-mmap"></a>
<a name="index-sbrk"></a>

</dd>
<dt> <code>22 (ERROR_NOT_FOUND) cannot locate pointer in heap</code></dt>
<dd><p>Cannot locate pointer in heap.  The user passed in a pointer which the heap did not know about.  Either this pointer was
allocated by some other mechanism (like <code>mmap</code> or <code>sbrk</code> directly) or it is a random invalid pointer.
</p>
<p>In some rare circumstances, sometimes seen with shared libraries, there can be two separate copies of the dmalloc
library in a program.  Each one does not know about the pointers allocated by the other.
</p>

<a name="index-23_002c-error-code"></a>
<a name="index-error-code-23"></a>
<a name="index-found-pointer-the-user-was-looking-for"></a>
<a name="index-is-found-error"></a>
<a name="index-ERROR_005fIS_005fFOUND"></a>

</dd>
<dt> <code>23 (ERROR_IS_FOUND) found pointer the user was looking for</code></dt>
<dd><p>This indicates that the pointer specified in the address part of the environmental variable was discovered by the
library.  See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.  This error is useful so you can put a breakpoint in a debugger to find where a
particular address was allocated.  See section <a href="#Using-With-a-Debugger">Using Dmalloc With a Debugger</a>.
</p>

<a name="index-24_002c-error-code"></a>
<a name="index-error-code-24"></a>
<a name="index-possibly-bad-_002ec-filename-pointer"></a>
<a name="index-bad-file-error"></a>
<a name="index-ERROR_005fBAD_005fFILE"></a>

</dd>
<dt> <code>24 (ERROR_BAD_FILE) possibly bad .c filename pointer</code></dt>
<dd><p>A possibly invalid filename was discovered in the dmalloc administrative sections.  This could indicate some corruption
of the internal tables.  It also could mean that you have a source file whose name is longer than 100 characters.  See
<code>MAX_FILE_LENGTH</code> in the &lsquo;<tt>settings.dist</tt>&rsquo; file.
</p>

<a name="index-25_002c-error-code"></a>
<a name="index-error-code-25"></a>
<a name="index-possibly-bad-_002ec-file-line_002dnumber"></a>
<a name="index-bad-line-error"></a>
<a name="index-ERROR_005fBAD_005fLINE"></a>

</dd>
<dt> <code>25 (ERROR_BAD_LINE) possibly bad .c file line-number</code></dt>
<dd><p>A line-number was out-of-bounds in the dmalloc administrative sections.  This could indicate some corruption of the
internal tables.  It also could mean that you have a source file containing more than <code>30000</code> lines of code.  See
<code>MAX_LINE_NUMBER</code> in the &lsquo;<tt>settings.dist</tt>&rsquo; file.
</p>

<a name="index-26_002c-error-code"></a>
<a name="index-error-code-26"></a>
<a name="index-failed-under-picket_002dfence-magic_002dnumber-check"></a>
<a name="index-under-fence-error"></a>
<a name="index-ERROR_005fUNDER_005fFENCE"></a>

</dd>
<dt> <code>26 (ERROR_UNDER_FENCE) failed UNDER picket-fence magic-number check</code></dt>
<dd><p>This indicates that a pointer had its lower bound picket-fence magic number overwritten.  If the <code>check-fence</code>
token is enabled, the library writes magic values above and below allocations to protect against overflow.  Most likely
this is because a pointer below it went past its allocate and wrote into the next pointer&rsquo;s space.
</p>

<a name="index-27_002c-error-code"></a>
<a name="index-error-code-27"></a>
<a name="index-failed-over-picket_002dfence-magic_002dnumber-check"></a>
<a name="index-over-fence-error"></a>
<a name="index-ERROR_005fOVER_005fFENCE"></a>

</dd>
<dt> <code>27 (ERROR_OVER_FENCE) failed OVER picket-fence magic-number check</code></dt>
<dd><p>This indicates that a pointer had its upper bound picket-fence magic space overwritten.  If the <code>check-fence</code> token
is enabled, the library writes magic values above and below allocations to protect against overflow.  Most likely this
is because an array or string allocation wrote past the end of the allocation.
</p>
<p>Check for improper usage of <code>strcat</code>, <code>sprintf</code>, <code>strcpy</code>, and any other functions which work with
strings and do not protect themselves by tracking the size of the string.  These functions should <em>always</em> be
replaced with: <code>strncat</code>, <code>snprintf</code>, <code>strncpy</code>, and others.
</p>

<a name="index-28_002c-error-code"></a>
<a name="index-error-code-28"></a>
<a name="index-use-of-pointer-would-exceed-allocation"></a>
<a name="index-would-overwrite-error"></a>
<a name="index-ERROR_005fWOULD_005fOVERWRITE"></a>

</dd>
<dt> <code>28 (ERROR_WOULD_OVERWRITE) use of pointer would exceed allocation</code></dt>
<dd><p>This error is generated by the function pointer checking code usually enabled with the <code>check-funcs</code> token.
Dmalloc overloads a number of string and memory copying functions and verifies that the buffers (if allocated in the
heap) would not be overwritten by the function.
</p>

<a name="index-30_002c-error-code"></a>
<a name="index-error-code-30"></a>
<a name="index-pointer-is-not-to-start-of-memory-block"></a>
<a name="index-not-start-block-error"></a>
<a name="index-ERROR_005fNOT_005fSTART_005fBLOCK"></a>

</dd>
<dt> <code>30 (ERROR_NOT_START_BLOCK) pointer is not to start of memory block</code></dt>
<dd><p>This indicates that the user passed in a pointer to be freed or reallocated that was not at the start of the allocation.
You would get this error, for example, if you allocate and get pointer <code>X</code> but then try to free <code>X+1</code>.
</p>

<a name="index-40_002c-error-code"></a>
<a name="index-error-code-40"></a>
<a name="index-invalid-allocation-size"></a>
<a name="index-bad-size-error"></a>
<a name="index-ERROR_005fBAD_005fSIZE"></a>

</dd>
<dt> <code>40 (ERROR_BAD_SIZE) invalid allocation size</code></dt>
<dd><p>This error indicates that a size value in the internal structures of the library were corrupted.  This could be a random
pointer problem, pointer overflow, or some other corruption.
</p>

<a name="index-41_002c-error-code"></a>
<a name="index-error-code-41"></a>
<a name="index-largest-maximum-allocation-size-exceeded"></a>
<a name="index-too-big-error"></a>
<a name="index-ERROR_005fTOO_005fBIG"></a>

</dd>
<dt> <code>41 (ERROR_TOO_BIG) largest maximum allocation size exceeded</code></dt>
<dd><p>An allocation asked for memory larger than the configured maximum.  This is a user configured setting.  See
<code>LARGEST_ALLOCATION</code> in the &lsquo;<tt>settings.dist</tt>&rsquo; file.  It is used to protect against wild allocation sizes.  If
you have super large allocation sizes then you should tune the <code>LARGEST_ALLOCATION</code> value appropriately.
</p>

<a name="index-43_002c-error-code"></a>
<a name="index-error-code-43"></a>
<a name="index-could-not-grow-heap-by-allocating-memory"></a>
<a name="index-alloc-failed-error"></a>
<a name="index-ERROR_005fALLOC_005fFAILED"></a>

</dd>
<dt> <code>43 (ERROR_ALLOC_FAILED) could not grow heap by allocating memory</code></dt>
<dd><p>The library could not allocate more heap space and the program has run out of memory.  This could indicate that you&rsquo;ve
overflowed some system imposed limit.  On many operation systems, the <code>ulimit</code> call can tune system defaults.  The
library uses a lot more memory compared to the system malloc library because it stores a lot more information about the
allocated pointers.
</p>
<a name="index-mmap-1"></a>
<a name="index-USE_005fMMAP-conf_002eh-option"></a>

<p><em>NOTE</em>: This also may be due to an inability of your operating system to use the <code>mmap</code> system call to
allocate memory.  You may need to force the <code>USE_MMAP</code> setting to be 0.  Please use the forums at URL
<a href="http://dmalloc.com/">http://dmalloc.com/</a> to report issues with this.
</p>

<a name="index-45_002c-error-code"></a>
<a name="index-error-code-45"></a>
<a name="index-memory-limit"></a>
<a name="index-over-user-specified-allocation-limit-error"></a>
<a name="index-over-limit-error"></a>
<a name="index-ERROR_005fOVER_005fLIMIT"></a>

</dd>
<dt> <code>45 (ERROR_OVER_LIMIT) over user specified allocation limit</code></dt>
<dd><p>The library has allocated more memory than was specified in the memory-limit environmental variable.  See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.
</p>

<a name="index-60_002c-error-code"></a>
<a name="index-error-code-60"></a>
<a name="index-pointer-is-not-on-block-boundary"></a>
<a name="index-not-on-block-boundary-error"></a>
<a name="index-ERROR_005fNOT_005fON_005fBLOCK"></a>

</dd>
<dt> <code>60 (ERROR_NOT_ON_BLOCK) pointer is not on block boundary</code> </dt>
<dd><p>The user tried to free or realloc a pointer that was not pointing to a block boundary.  You would get this error, for
example, if you allocate and get pointer <code>X</code> but then try to free <code>X+1</code>.
</p>

<a name="index-61_002c-error-code"></a>
<a name="index-error-code-61"></a>
<a name="index-tried-to-free-previously-freed-pointer"></a>
<a name="index-already-free-error"></a>
<a name="index-ERROR_005fALREADY_005fFREE"></a>

</dd>
<dt> <code>61 (ERROR_ALREADY_FREE) tried to free previously freed pointer</code></dt>
<dd><p>The user tried to free a pointer than has already been freed.  This is a very common mistake and can lead to serious
problems.  It can be because a destructor is being called twice for some reason.  Although tracking down the specific
source is highly recommended, it is good to set pointers to NULL (0L) after you free them as a rule.
</p>

<a name="index-67_002c-error-code"></a>
<a name="index-error-code-67"></a>
<a name="index-free-space-has-been-overwritten"></a>
<a name="index-free-overwritten-error"></a>
<a name="index-ERROR_005fFREE_005fOVERWRITTEN"></a>
<a name="index-free_002dblank"></a>
<a name="index-check_002dblank"></a>

</dd>
<dt> <code>67 (ERROR_FREE_OVERWRITTEN) free space has been overwritten</code></dt>
<dd><p>If either the <code>free-blank</code> or <code>check-blank</code> tokens are enabled then the library will overwrite memory when it
is freed with the &ldquo;dmalloc-free&rdquo; byte (hex 0xdf, octal 0337, decimal 223).  If the program writes into this space,
then the library will detect the write and trigger this error.  This could indicate that the program is using a pointer
after it has been freed.
</p>

<a name="index-70_002c-error-code"></a>
<a name="index-error-code-70"></a>
<a name="index-bad-admin-structure-list"></a>
<a name="index-admin-list-error"></a>
<a name="index-ERROR_005fADMIN_005fLIST"></a>

</dd>
<dt> <code>70 (ERROR_ADMIN_LIST) bad admin structure list</code></dt>
<dd><p>An internal corruption in the library&rsquo;s administrative structures has been detected.  This could be a random pointer
problem, pointer overflow, or some other corruption.
</p>

<a name="index-72_002c-error-code"></a>
<a name="index-error-code-72"></a>
<a name="index-internal-address-list-corruption"></a>
<a name="index-address-list-error"></a>
<a name="index-ERROR_005fADDRESS_005fLIST"></a>

</dd>
<dt> <code>72 (ERROR_ADDRESS_LIST) internal address list corruption</code></dt>
<dd><p>An internal corruption in the library&rsquo;s administrative structures has been detected.  This could be a random pointer
problem, pointer overflow, or some other corruption.
</p>

<a name="index-73_002c-error-code"></a>
<a name="index-error-code-73"></a>
<a name="index-internal-memory-slot-corruption"></a>
<a name="index-slot-corrupt-error"></a>
<a name="index-ERROR_005fSLOT_005fCORRUPT"></a>

</dd>
<dt> <code>73 (ERROR_SLOT_CORRUPT) internal memory slot corruption</code></dt>
<dd><p>An internal corruption in the library&rsquo;s administrative structures has been detected.  This could be a random pointer
problem, pointer overflow, or some other corruption.
</p>
</dd>
</dl>


<hr size="6">
<a name="Disabling-the-Library"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Error-Codes" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-C_002b_002b" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="How-to-Disable-the-library"></a>
<h2 class="section">3.7 How to Disable the library</h2>

<a name="index-disabling-library-checking"></a>
<a name="index-disabling-the-library"></a>
<a name="index-dmalloc_005fdebug-1"></a>
<a name="index-restoring-library-flags"></a>
<a name="index-turning-off-library-flags"></a>

<p>If you would like to disable the library&rsquo;s detailed checking features during a particularly allocation intensive section
of code, you can do something like the following:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">   unsigned int dmalloc_flags;
   &hellip;
   /* turn off all debug flags and save a copy of old value */
   dmalloc_flags = dmalloc_debug(0);

   /* section of a lot of allocations */
   &hellip;
   /* end of section */

   /* restore the dmalloc flag setting */
   dmalloc_debug(dmalloc_flags);
</pre></td></tr></table>

<p>When you are finished with the development and debugging sessions, you may want to disable the dmalloc library and put
in its place either the system&rsquo;s memory-allocation routines, gnu-malloc, or maybe your own.  Attempts have been made to
make this a reasonably painless process.  The ease of the extraction depends heavily on how many of the library&rsquo;s
features your made use of during your coding.
</p>
<p>Reasonable suggestions are welcome as to how to improve this process
while maintaining the effectiveness of the debugging.
</p>
<ul>
<li>
If you want to <em>totally</em> disable the dmalloc library then you will need to recompile all the C files that include
&lsquo;<tt>dmalloc.h</tt>&rsquo; while defining <code>DMALLOC_DISABLE</code>.  This will cause the dmalloc macros to not be applied.
See section <a href="#Allocation-Macros">Macros Providing File and Line Information</a>.

<table><tr><td>&nbsp;</td><td><pre class="example">cc -g -DDMALLOC_DISABLE file.c
</pre></td></tr></table>

<p>An alternative is to surround the <code>dmalloc.h</code> inclusion or any direct dmalloc references with an <code>#ifdef
DMALLOC</code> and then just remove the -DDMALLOC.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#ifdef DMALLOC
#include &quot;dmalloc.h&quot;
#endif

main()
{
   &hellip;

#ifdef DMALLOC
   dmalloc_verify(0L);
#endif
   return 0;
}
</pre></td></tr></table>

<table><tr><td>&nbsp;</td><td><pre class="example">// to get dmalloc information
$ cc -DDMALLOC main.c

// without dmalloc information
$ cc main.c
</pre></td></tr></table>

</li><li>
If you compiled any of your source modules with <code>DMALLOC_FUNC_CHECK</code> defined then you must first recompile all
those modules without the flag enabled.

<p>If you have disabled dmalloc with the <code>DMALLOC_DISABLED</code> flag or never included &lsquo;<tt>dmalloc.h</tt>&rsquo; in any of your C
files, then you will not need to recompile your sources when you need to disable the library.
</p>
<p>If you get unresolved references like <code>_dmalloc_malloc</code> or <code>_dmalloc_bcopy</code> then something was not disabled as
it should have been.
</p></li></ul>


<hr size="6">
<a name="Using-With-C_002b_002b"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Disabling-the-Library" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-a-Debugger" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Using-the-Library-with-C_002b_002b"></a>
<h2 class="section">3.8 Using the Library with C++</h2>

<a name="index-c_002b_002b-usage"></a>
<a name="index-dmallocc_002ecc-file"></a>

<a name="index-libdmallocxx_002ea"></a>
<p>For those people using the C++ language, the library tries to configure and build &lsquo;<tt>libdmallocxx.a</tt>&rsquo; library.  This
library should be linked into your C++ programs instead of &lsquo;<tt>libdmalloc.a</tt>&rsquo;.
</p>
<a name="index-dmallocc_002ecc"></a>
<p>Dmalloc is not as good with C++ as C because the dynamic memory routines in C++ are <code>new()</code> and <code>delete()</code> as
opposed to <code>malloc()</code> and <code>free()</code>.  Since new and delete are usually not used as functions but rather as
<code>x = new type</code>, there is no easy way for dmalloc to pass in file and line information unfortunately.  The
&lsquo;<tt>libdmallocxx.a</tt>&rsquo; library provides the file &lsquo;<tt>dmallocc.cc</tt>&rsquo; which effectively redirects <code>new</code> to the more
familiar <code>malloc</code> and <code>delete</code> to the more familiar <code>free</code>.
</p>
<p><em>NOTE</em>: The author is not a C++ hacker so feedback in the form of other hints and ideas for C++ users would be much
appreciated.
</p>

<hr size="6">
<a name="Using-With-a-Debugger"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Using-With-C_002b_002b" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Errors" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Using-Dmalloc-With-a-Debugger"></a>
<h2 class="section">3.9 Using Dmalloc With a Debugger</h2>

<a name="index-debugger-usage-with-dmalloc"></a>
<a name="index-using-a-debugger-with-dmalloc"></a>

<p>Here are a number of possible scenarios for using the dmalloc library to track down problems with your program.
</p>
<p>You should first enable a logfile filename and turn on a set of debug features.  You can use <kbd>dmalloc -l logfile
low</kbd> to accomplish this.  If you are interested in having the error messages printed to your terminal as well, enable
the <code>print-messages</code> token by typing <kbd>dmalloc -p print-messages</kbd> afterwards.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
<a name="index-gdb"></a>
<a name="index-dmalloc_005ferror_0028_0029-routine"></a>
<p>Now you can enter your debugger (I use the <em>excellent</em> GNU debugger gdb), and put a break-point in
<code>dmalloc_error()</code> which is the internal error routine for the library.  When your program is run, it will stop
there if a memory problem is detected.
</p>
<p>If you are using GDB, I would recommend adding the contents of &lsquo;<tt>dmalloc.gdb</tt>&rsquo; in the &lsquo;<tt>contrib</tt>&rsquo; subdirectory to
your &lsquo;<tt>.gdbinit</tt>&rsquo; file in your home directory.  This enables the <code>dmalloc</code> command which will prompt you for the
arguments to the dmalloc command and will set a break point in <code>dmalloc_error()</code> automatically.
</p>
<a name="index-shared-libraries-with-gdb"></a>
<a name="index-gdb-with-shared-libraries"></a>
<p>If you are using shared libraries, you may want to execute the following commands initially to load in dmalloc and other
library symbols:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">(gdb) sharedlibrary
(gdb) add-shared-symbol-files
</pre></td></tr></table>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#General-Errors">3.9.1 Diagnosing General Problems with a Debugger</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Diagnosing general problems with a debugger.
</td></tr>
<tr><td align="left" valign="top"><a href="#Memory-Leaks">3.9.2 Tracking Down Non-Freed Memory</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  Tracking down non-freed memory.
</td></tr>
<tr><td align="left" valign="top"><a href="#Fence_002dPost-Overruns">3.9.3 Diagnosing Fence-Post Overwritten Memory</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Diagnosing fence-post overwritten memory.
</td></tr>
<tr><td align="left" valign="top"><a href="#Translate-Return-Addresses">3.9.4 Translating Return Addresses into Code Locations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Convert ra return-addresses into a location.
</td></tr>
</table>


<hr size="6">
<a name="General-Errors"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Using-With-a-Debugger" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Memory-Leaks" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-a-Debugger" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Diagnosing-General-Problems-with-a-Debugger"></a>
<h3 class="subsection">3.9.1 Diagnosing General Problems with a Debugger</h3>

<a name="index-diagnosing-errors"></a>
<a name="index-general-errors"></a>
<a name="index-mmap-2"></a>
<a name="index-sbrk-1"></a>

<p>If your program stops at the <code>dmalloc_error()</code> routine then one of a number of problems could be happening.
Incorrect arguments could have been passed to a malloc call: asking for negative number of bytes, trying to realloc a
non-heap pointer, etc..  There also could be a problem with the system&rsquo;s allocations: you&rsquo;ve run out of memory, some
other function in your program is using the heap allocation functions <code>mmap</code> or <code>sbrk</code>, etc..  However, it is
most likely that some code that has been executed was naughty.
</p>
<p>To get more information about the problem, first print via the debugger the dmalloc_errno variable to get the library&rsquo;s
internal error code.  You can suspend your debugger and run <kbd>dmalloc -e value-returned-from-print</kbd> to get an English
translation of the error.  A number of the error messages are designed to indicate specific problems with the library
administrative structures and may not be user-friendly.
</p>
<p>If the problem was due to the arguments or system allocations then the source of the problem has been found.  However,
if some code did something wrong, you may have some more work to do to locate the actual problem.  The <code>check-heap</code>
token should be enabled and the interval setting disabled or set to a low value so that the library can find the problem
as close as possible to its source.  The code that was execute right before the library halted, can then be examined
closely for irregularities.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>, See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
<a name="index-dmalloc_005fverify_0028_0029-routine"></a>

<p>You may also want to put calls to <code>dmalloc_verify(0)</code> in your code before the section which generated the error.
This should locate the problem faster by checking the library&rsquo;s structures at that point.  See section <a href="#Extensions">Additional Non-standard Routines</a>.
</p>

<hr size="6">
<a name="Memory-Leaks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#General-Errors" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Fence_002dPost-Overruns" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-a-Debugger" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Tracking-Down-Non_002dFreed-Memory"></a>
<h3 class="subsection">3.9.2 Tracking Down Non-Freed Memory</h3>

<a name="index-memory-leaks-1"></a>
<a name="index-leaking-memory-1"></a>

<p>So you&rsquo;ve run your program, examined the log-file and discovered (to your horror) some un-freed memory.  Memory leaks
can become large problems since even the smallest and most insignificant leak can starve the program given the right
circumstances.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">not freed: '0x45008' (12 bytes) from 'ra=0x1f8f4'
not freed: '0x45028' (12 bytes) from 'unknown'
not freed: '0x45048' (10 bytes) from 'argv.c:1077'
  known memory not freed: 1 pointer, 10 bytes
unknown memory not freed: 2 pointers, 24 bytes
</pre></td></tr></table>

<p>Above you will see a sample of some non-freed memory messages from the logfile.  In the first line the &lsquo;<samp>0x45008</samp>&rsquo; is
the pointer that was not freed, the &lsquo;<samp>12 bytes</samp>&rsquo; is the size of the unfreed block, and the &lsquo;<samp>ra=0x1f8f4</samp>&rsquo; or
return-address shows where the allocation originated from.  See section <a href="#Translate-Return-Addresses">Translating Return Addresses into Code Locations</a>.
</p>
<p>The systems which cannot provide return-address information show &lsquo;<samp>unknown</samp>&rsquo; instead, as in the 2nd line in the
sample above.
</p>
<p>The &lsquo;<samp>argv.c:1077</samp>&rsquo; information from the 3rd line shows the file and line number which allocated the memory which was
not freed.  This information comes from the calls from C files which included &lsquo;<tt>dmalloc.h</tt>&rsquo;.  See section <a href="#Allocation-Macros">Macros Providing File and Line Information</a>.
</p>
<p>At the bottom of the sample it totals the memory for you and breaks it down to known memory (those calls which supplied
the file/line information) and unknown (the rest).
</p>
<p>Often, you may allocate memory in via <code>strdup()</code> or another routine, so the logfile listing where in the
<code>strdup</code> routine the memory was allocated does not help locate the true source of the memory leak &ndash; the routine
that called <code>strdup</code>.  Without a mechanism to trace the calling stack, there is no way for the library to see who
the caller of the caller (so to speak) was.
</p>
<a name="index-STORE_005fSEEN_005fCOUNT-conf_002eh-option"></a>
<a name="index-pointer-seen-count"></a>
<a name="index-seen-count-1"></a>

<p>However, there is a way to track down unfreed memory in this circumstance.  You need to compile the library with
<code>STORE_SEEN_COUNT</code> defined in &lsquo;<tt>conf.h</tt>&rsquo;.  The library will then record how many times a pointer has been
allocated or freed.  It will display the unfreed memory as:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">not freed: '0x45008|s3' (12 bytes) from 'ra=0x1f8f4'
</pre></td></tr></table>

<p>The <code>STORE_SEEN_COUNT</code> option adds a &lsquo;<samp>|s#</samp>&rsquo; qualifier to the address.  This means that the address in question
was seen &lsquo;<samp>#</samp>&rsquo; many times.  In the above example, the address &lsquo;<samp>0x45008</samp>&rsquo; was seen &lsquo;<samp>3</samp>&rsquo; times.  The last time
it was allocated, it was not freed.
</p>
<p>How can a pointer be &ldquo;seen&rdquo; 3 times?  Let say you <code>strdup</code> a string of 12 characters and get address
&lsquo;<samp>0x45008</samp>&rsquo; &ndash; this is #1 time the pointer is seen.  You then free the pointer (seen #2) but later <code>strdup</code>
another 12 character string and it gets the &lsquo;<samp>0x45008</samp>&rsquo; address from the free list (seen #3).
</p>
<p>So to find out who is allocating this particular 12 bytes the 3rd time, try <kbd>dmalloc -a 0x45008:3</kbd>.  The library
will stop the program the third time it sees the &lsquo;<samp>0x45008</samp>&rsquo; address.  You then enter a debugger and put a break
point at <code>dmalloc_error</code>.  Run the program and when the breakpoint is reached you can examine the stack frame to
determine who called <code>strdup</code> to allocate the pointer.
</p>
<p>To not bother with the <code>STORE_SEEN_COUNT</code> feature, you can also run your program with the <code>never-reuse</code> token
enabled.  This token will cause the library to never reuse memory that has been freed.  Unique addresses are always
generated.  This should be used with caution since it may cause your program to run out of memory.
</p>

<hr size="6">
<a name="Fence_002dPost-Overruns"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Memory-Leaks" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Translate-Return-Addresses" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-a-Debugger" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Diagnosing-Fence_002dPost-Overwritten-Memory"></a>
<h3 class="subsection">3.9.3 Diagnosing Fence-Post Overwritten Memory</h3>

<a name="index-fence_002dpost-errors"></a>

<p>For a definition of fence-posts please see the &ldquo;Features&rdquo; section.  See section <a href="#Features">General Features of the Library</a>.
</p>
<p>To detect fence-post overruns, you need to enable the &lsquo;<samp>check-fence</samp>&rsquo; token.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.  This pads your
allocations with some extra bytes at the front and the end and watches the space to make sure that they don&rsquo;t get
overwritten.  <em>NOTE:</em> The library cannot detect if this space gets read, only written.
</p>
<p>If you have encountered a fence-post memory error, the logfile should be able to tell you the offending address.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">free: failed UNDER picket-fence magic-number checking: 
pointer '0x1d008' from 'dmalloc_t.c:427'
Dump of proper fence-bottom bytes: '\e\253\300\300\e\253\300\300'
Dump of '0x1d008'-8: '\e\253\300\300WOW!\003\001pforger\023\001\123'
</pre></td></tr></table>

<p>The above sample shows that the pointer &lsquo;<samp>0x1d008</samp>&rsquo; has had its lower fence-post area overwritten.  This means that
the code wrote below the bottom of the address or above the address right below this one.  In the sample, the string
that did it was &lsquo;<samp>WOW!</samp>&rsquo;.
</p>
<p>The library first shows you what the proper fence-post information should look like, and then shows what the pointer&rsquo;s
bad information was.  If it cannot print the character, it will display the value as &lsquo;<samp>\ddd</samp>&rsquo; where ddd are three
octal digits.
</p>
<p>By enabling the <code>check-heap</code> debugging token and assigning the interval setting to a low number, you should be able
to locate approximately when this problem happened.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>, See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>

<hr size="6">
<a name="Translate-Return-Addresses"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Fence_002dPost-Overruns" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-Threads" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-a-Debugger" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Translating-Return-Addresses-into-Code-Locations"></a>
<h3 class="subsection">3.9.4 Translating Return Addresses into Code Locations</h3>

<a name="index-ra_005finfo_002epl-1"></a>

<p>The following gdb commands help you translate the return-addresses (ra=) entries in the logfile into locations in your
code.  I&rsquo;ve provided a &lsquo;<tt>ra_info.pl</tt>&rsquo; perl script in the &lsquo;<tt>contrib/</tt>&rsquo; directory with the dmalloc sources which
seems to work well with gdb.  But, if you need to do it manually, here are the commands in gdb to use.
</p>
<a name="index-return_002daddress-translation"></a>
<a name="index-caller-address-translation"></a>

<table><tr><td>&nbsp;</td><td><pre class="example"># you may need to add the following commands to load in shared libraries
(gdb) sharedlibrary
(gdb) add-shared-symbol-files

(gdb) x 0x10234d
0x10234d &lt;_findbuf+132&gt;: 0x7fffceb7

(gdb) info line *(0x82cc)
Line 1092 of argv.c starts at pc 0x7540 and ends at 0x7550.
</pre></td></tr></table>

<p>In the above example, gdb was used to find that the two non-freed memory pointers were allocated in <code>_findbuf()</code>
and in file argv.c line 1092 respectively.  The &lsquo;<samp>x address</samp>&rsquo; (for examine) can always be used on the
return-addresses but the &lsquo;<samp>info line *(address)</samp>&rsquo; will only work if that file was compiled using the <kbd>-g</kbd> option
and has not been stripped.  This limitation may not be true in later versions of gdb.
</p>

<hr size="6">
<a name="Using-With-Threads"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Translate-Return-Addresses" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-With-Cygwin" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Using-the-Library-with-a-Thread-Package"></a>
<h2 class="section">3.10 Using the Library with a Thread Package</h2>

<a name="index-threads"></a>
<a name="index-pthreads"></a>

<p>Threads are special operating system facilities which allow your programs to have multiple threads of execution (hence
the name).  In effect your program can be doing a number of things &ldquo;at the same time&rdquo;.  This allows you to take full
advantage of modern operating system scheduling and multi-processor hardware.  If I&rsquo;ve already lost you or if any of the
terminology below does not make sense, see manuals about POSIX threads (pthreads) before going any further.  O&rsquo;Reilly
publishes a pretty good pthreads manual for example.
</p>
<p>To use dmalloc with your threaded program, you will first need to make sure that you are linking with
&lsquo;<tt>libdmallocth.a</tt>&rsquo; which is the threaded version of the library.  The support for threads in dmalloc should be
adequate for most if not all testing scenarios.  It provides support for mutex locking itself to protect against race
conditions that result in multiple simultaneous execution.  One of the major problems is that most thread libraries uses
malloc themselves.  Since all of dmalloc&rsquo;s initialization happens when a call to malloc is made, we may be attempting to
initialize or lock the mutex while the thread library is booting up.  A very bad thing since thread libraries don&rsquo;t
expect to recurse.
</p>
<a name="index-lock-on"></a>

<p>The solution to this problem is to have the library not initialize or lock its mutex variable until after a certain
number of allocation calls have been completed.  If the library does not wait before initializing the locks, the thread
library will probably core dump.  If it waits too long then it can&rsquo;t protect itself from multiple execution and it will
abort or other bad things might happen.  You adjust the number of times to wait at runtime with the &lsquo;<samp>lock-on</samp>&rsquo;
option to the dmalloc program (for example <kbd>dmalloc -o 20</kbd>).  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.  Times values between 5 and 30
are probably good although operating systems will vary significantly.  You know its too low if your program immediately
core dumps and too high if the dmalloc library says its gone recursive although with low values, you might get either
problem.
</p>
<p>An additional complexity is when we are initializing the lock before mutex locking around the library.  As mentioned,
the initialization itself may generate a malloc call causing the library to go recursive and the pthread library to
possibly core dump. With the THREAD_INIT_LOCK setting defined in &lsquo;<tt>settings.h</tt>&rsquo;, you can tune how many times before
we start locking to try and initialize the mutex lock.  It defaults to 2 which seems to work for me.  If people need to
have this runtime configurable or would like to present an alternative default, please let me know.
</p>
<p>So to use dmalloc with a threaded program, follow the following steps carefully.
</p>
<ol>
<li> Follow the installation instructions on how to configure, make, and install the library but make sure to add the
<kbd>--enable-threads</kbd> argument to configure.  See section <a href="#Installation">How to Install the Library</a>.

</li><li> Typing <kbd>make</kbd> should be enough to build the threaded versions of the libraries including
&lsquo;<tt>libdmallocth.a</tt>&rsquo;.

</li><li> Link the dmalloc threaded library into your program.  The dmalloc library should probably be placed at or near
the end of the library list.

</li><li> Enable the debugging options that you need by typing <kbd>dmalloc -l logfile -i 100 low</kbd> (for example).
<kbd>dmalloc --usage</kbd> will provide verbose usage info for the dmalloc program.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.

</li><li> Enable the &ldquo;lock-on&rdquo; option (for example <kbd>dmalloc -o 20</kbd>).  As explained above, you may have to try
different values before getting it right.  Values between 5 and 30 are probably good.

</li><li> If you get a dmalloc error #13 &lsquo;<samp>thread locking has not been configured</samp>&rsquo; then you have not compiled you
program with the threaded version of dmalloc or there was a problem building it.

</li><li> If everything works, you should be able to run your program, have it not immediately crash, and the dmalloc
library should not complain about recursion.

</li></ol>

<p>If you have any specific questions or would like addition information posted in this section, please let me know.
Experienced thread programmers only please.
</p>

<hr size="6">
<a name="Using-With-Cygwin"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Using-With-Threads" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Debugging-A-Server" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Using-the-library-with-Cygwin-environment_002e"></a>
<h2 class="section">3.11 Using the library with Cygwin environment.</h2>

<a name="index-cygwin"></a>

<p>The Cygwin environment is a Linux-like environment for Windows.  It provides Linux look and feel as well as a
programming environment.  See URL <a href="http://www.cygwin.com/">http://www.cygwin.com/</a> for more details.
</p>
<a name="index-reading-environment_002c-problems-with"></a>
<a name="index-getenv_002c-problems-with"></a>
<a name="index-GetEnvironmentVariableA_002c-using-with"></a>

<p>Cygwin uses the <code>GetEnvironmentVariableA</code> function to read in environmental variables instead of <code>getenv</code>.
This functions are used to get the value of the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; variable which sets the debugging options.
See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.
</p>
<a name="index-HAVE_005fGETENVIRONMENTVARIABLEA"></a>
<a name="index-GETENV_005fSAVE-conf_002eh-option"></a>

<p>As of right now, dmalloc is not detecting the <code>GetEnvironmentVariableA</code> function correctly so you may need to tune
the &lsquo;<tt>conf.h</tt>&rsquo; file to get it to work.  See the sections on <code>HAVE_GETENVIRONMENTVARIABLEA</code> and
<code>GETENV_SAVE</code> settings.  Feedback is welcome here.
</p>
<p>If you still have problems reading in the environmental variables, you can work around this issue.  You can add some
code into the <code>main</code> function in your program to initialize the dmalloc flags yourself.  Here is a code sample:
</p>
<a name="index-dmalloc_005fdebug_005fsetup-usage"></a>

<table><tr><td>&nbsp;</td><td><pre class="example">main(int argc, char **argv)
{
#ifdef DMALLOC
   /*
    * Get environ variable DMALLOC_OPTIONS and pass the settings string
    * on to dmalloc_debug_setup to setup the dmalloc debugging flags.
    */
   dmalloc_debug_setup(getenv(&quot;DMALLOC_OPTIONS&quot;));
#endif

   /* rest of code in main starts here */
   &hellip;
}
</pre></td></tr></table>

<p>The <code>#ifdef</code> is just a good idea.  I means that when debugging with dmalloc you need to compile your code with
<code>-DDMALLOC</code>.  When you are done debugging you can remove the flag and the call to <code>dmalloc_debug_setup</code> will
be removed.
</p>
<p>Please let me know if there is a better way to do this.
</p>

<hr size="6">
<a name="Debugging-A-Server"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Using-With-Cygwin" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Logfile-Details" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Debugging-Memory-in-a-Server-or-Cgi_002dBin-Process"></a>
<h2 class="section">3.12 Debugging Memory in a Server or Cgi-Bin Process</h2>

<a name="index-cgi_002dbin-process-debugging"></a>
<a name="index-cgi_002dbin-usage-of-dmalloc"></a>
<a name="index-child-process-debugging"></a>
<a name="index-daemon-process-debugging"></a>
<a name="index-debugging-cgi_002dbin-processes"></a>
<a name="index-debugging-child-processes"></a>
<a name="index-debugging-daemon-processes"></a>
<a name="index-debugging-server-processes"></a>
<a name="index-server-process-debugging"></a>
<a name="index-usage-of-dmalloc-in-a-daemon"></a>
<a name="index-usage-of-dmalloc-in-a-server"></a>
<a name="index-usage-of-dmalloc-with-cgi_002dbin"></a>

<p>There are some specified challenges when trying to debug allocations in processes which do not startup, run, and then
shutdown.  Server processes (often called daemons) are those that are started (often at system boot time) and run
perpetually.  Other processes which are difficult to debug are CGI programs which are spawned by web servers or when you
want to start debugging inside of a child process.
</p>
<ol>
<li> Build your server or cgi-bin program with the dmalloc library like any other program.  See section <a href="#Getting-Started">Getting Started with the Library</a>.

</li><li> Add code into your program to enable the library flags to perform the memory checks that you require.  Since
these programs often do not run from the command line, you cannot use the dmalloc utility program and modify the process
environment.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.  The library provides a couple of functions to set the debugging flags when a
program is running.

<a name="index-dmalloc_005fdebug_005fsetup-function"></a>

</li><li> To set the memory debugging flags, use the <code>dmalloc_debug_setup</code> function which takes a string in the same
format of the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; environmental variable.  See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.  Use the dmalloc utility with
the <code>-n</code> no-changes argument to see the appropriate settings for the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; environmental variable.

<table><tr><td>&nbsp;</td><td><pre class="example">&gt; dmalloc -n -l logfile high
Outputed:
DMALLOC_OPTIONS=debug=0x4f4ed03,log=logfile
export DMALLOC_OPTIONS
</pre></td></tr></table>

<p>So if you want to turn on <kbd>high</kbd> debugging and log to the file &lsquo;<tt>logfile</tt>&rsquo; then you would copy the above
&lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; value into a call to <code>dmalloc_debug_setup</code>.  Notice that I have surrounded the dmalloc code
with an <code>#ifdef DMALLOC</code> so you&rsquo;ll have to compile using the <code>-DDMALLOC</code> flag.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">main()
{
#ifdef DMALLOC
   /* set the 'high' flags */
   dmalloc_debug_setup(&quot;debug=0x4f47d03,log=logfile&quot;);
#endif
   &hellip;
}
</pre></td></tr></table>

<p><em>Please note</em> that the <code>dmalloc_debug_setup</code> function does not know about <code>high</code>, <code>low</code>, or other
debug tokens but needs the actual flag values.
</p>
</li><li> For earlier versions of the library (before 5.0.0) without <code>dmalloc_debug_setup</code>, the <code>dmalloc_debug</code>
function is available to set the flags directly, but it cannot adjust the logfile name and the other environment
settings.  You can use the dmalloc utility program to see what the numerical equivalent of the <kbd>high</kbd> token.

<table><tr><td>&nbsp;</td><td><pre class="example">&gt; dmalloc -n high
Outputed:
DMALLOC_OPTIONS=debug=0x4f4ed03
export DMALLOC_OPTIONS
</pre></td></tr></table>

<p>You can then take the <code>0x4f4ed03</code> hexadecimal number and call <code>dmalloc_debug</code> with that number.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">main()
{
#ifdef DMALLOC
   /* set the 'high' flags */
   dmalloc_debug(0x4f4ed03);
#endif
   &hellip;
}
</pre></td></tr></table>

</li><li> Even with the settings enabled, you may have problems getting the logfile to be written if your program is
running as &lsquo;<samp>nobody</samp>&rsquo; or another user without permissions for security reasons.  This is especially true for cgi-bin
programs.  In this case you should specify a full path to your malloc logfile in a world writable directory
(ex. <code>dmalloc_debug_setup(&quot;debug=0x4f47d03,log=/var/tmp/malloc&quot;);</code>).  Watch for programs which change into other
directories and which may cause logfiles specified as relative or local paths to be dropped in other locations.  You may
always want to use a full path logfile.

</li><li> Once you have your settings enabled and your log is being generated, you may now want to check out how your
process is doing in terms of unfreed memory.  Since it is not shutting down, the automatic unfreed log entries are not
being dropped to the logfile.  By using the <code>dmalloc_mark</code> and <code>dmalloc_log_changed</code> functions, you can set a
mark point at a certain place inside of your program, and then later see whether there are any unfreed pointers since
the mark.

<table><tr><td>&nbsp;</td><td><pre class="example">main()
{
#ifdef DMALLOC
  /* set the 'high' flags */
  dmalloc_debug_setup(&quot;debug=0x4f47d03,log=logfile&quot;);
#endif

  while (1) {
    /* accept a connection from a client */
    accept_connection();

    while (1) {
#ifdef DMALLOC
      unsigned long mark;
      /* get the current dmalloc position */
      mark = dmalloc_mark() ;
#endif
      /* process the connection */
      if (process_connection() != PROCESS_OK) {
        break;
      }
#ifdef DMALLOC
      /*
       * log unfreed pointers that have been added to
       * the heap since mark
       */
      dmalloc_log_changed(mark,
                          1 /* log unfreed pointers */,
                          0 /* do not log freed pointers */,
                          1 /* log each pnt otherwise summary */);
#endif
    }
    /* close the connection with the client */
    close_connection();
  }
  &hellip;
}
</pre></td></tr></table>

<p>Usually you would set the mark after the initializations and before each transaction is processed.  Then for each
transaction you can use <code>dmalloc_log_changed</code> to show the unfreed memory.  See section <a href="#Extensions">Additional Non-standard Routines</a>.
</p>
</li><li> You can also use the <code>dmalloc_log_stats</code> function to dump
general information about the heap.  Also, remember that you can use the <code>dmalloc_message</code> and
<code>dmalloc_vmessage</code> routines to annotate the dmalloc logfile with details to help you debug memory problems.
See section <a href="#Extensions">Additional Non-standard Routines</a>.

</li></ol>


<hr size="6">
<a name="Logfile-Details"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Debugging-A-Server" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Hints" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Explanation-of-the-Logfile-Output"></a>
<h2 class="section">3.13 Explanation of the Logfile Output</h2>

<a name="index-logfile-format"></a>

<p>Most of time you will be using the logfile output from library as the sole information source for diagnosing problems in
and getting statistics for your program.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">1098918225: 3: Dmalloc version 'Version 5.6.5'
1098918225: 3: flags = 0x4f4e503, logfile '/tmp/dmalloc.log'
1098918225: 3: interval = 500, addr = 0, seen # = 0, limit = 0
1098918225: 3: starting time = 1098918225
1098918225: 3: process pid = 32406
1098918226: 4: WARNING: tried to free(0) from foo.c:708'
1098918228: 20: *** free: at 'unknown' pnt '0xed310080|s2': \
            size 12, alloced at 'bar.c:102'
1098918230: 50: ERROR: heap_check: free space was overwritten (err 67)
1098918230: 50: error details: checking free pointer
1098918230: 50: pointer '0x291c5' from 'unknown' prev access 'foo.c:787'
</pre></td></tr></table>

<p>Here is a short example of some logfile information.  Each of the lines are prefixed by the time (in epoch seconds since
1/1/1970) and the iteration or call count which is the number of times the library has been called from malloc, free,
verify, etc..  In the above example, the first 5 log entries where written at epoch 1098918225 or &lsquo;<samp>Wed Oct 27
19:03:45 2004 EST</samp>&rsquo; and they were generated by the 3rd call to the library.  See the &lsquo;<tt>settings.dist</tt>&rsquo; file entries to
tune what elements appear on each line: LOG_TIME_NUMBER, LOG_ITERATION, LOG_PID, etc..  You can convert the epoch
seconds to a date from the command line with the following perl code: <code>perl -e 'print localtime($ARGV[0]).&quot;\n&quot;;'
epoch-seconds-number</code>
</p>
<a name="index-version-of-library"></a>
<p>The first 5 lines of the sample logfile contain header information for all logfiles.  They show the version number and
URL for the library as well as all of the settings that the library is currently using.  These settings are tuned using
the dmalloc utility program.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.  The 5th line of is the process-id that generated the logfile.
</p>
<a name="index-ALLOW_005fFREE_005fNULL_005fMESSAGE"></a>
<p>The 6th line in the above example is what causes the logfile to be opened and the header to be written.  It is a warning
that tells you that you tried to free a 0L pointer at a certain location.  You can disable these warnings by setting
&lsquo;<samp>ALLOW_FREE_NULL_MESSAGE</samp>&rsquo; to 0 in &lsquo;<tt>settings.dist</tt>&rsquo;.
</p>
<a name="index-seen-count-2"></a>
<p>Line 7 is an example of a transaction log that you get when you enable the <code>log-trans</code> debug token.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.  This line shows that a call to free was made from an unknown location.  It is unknown because the file in
question did not include &lsquo;<tt>dmalloc.h</tt>&rsquo; to get file/line-number information.  The call to free was freeing the pointer
address <code>0xed310080</code> which we have &ldquo;seen&rdquo; 2 times (s2).  We saw the pointer when it was allocated and then we are
seeing it again when it was freed.  Because the library is reusing pointers (reclaiming freed memory) the seen count
helps to track how many times a pointer was used.  The last part of the line shows that the pointer to be freed was
allocated by &lsquo;<tt>bar.c</tt>&rsquo; line 102.
</p>
<p>Lines 8-10 is the next problem that the library caught and this one is an error.  It happened 5 seconds from the start
of the log (1098918230) and at the 50th call into the library.  It shows that an allocation that had been freed then was
overwritten.  This may imply that someone tried to use memory after it was freed or that there was a loose pointer
reference.  The last two lines give more details about when the error was discovered, the address of the offending
pointer, and when the pointer was previous accessed, in this case freed.  To discover where this problem is happening,
you can use a debugger.  See section <a href="#Using-With-a-Debugger">Using Dmalloc With a Debugger</a>.
</p>

<hr size="6">
<a name="Other-Hints"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Logfile-Details" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Various-Other-Hints-That-May-Help"></a>
<h2 class="section">3.14 Various Other Hints That May Help</h2>

<a name="index-other-hints"></a>
<a name="index-hints-that-may-help"></a>
<a name="index-various-hints"></a>

<p>One of the problems that is often seen is that a program crashes in the <code>libc</code> memory code and you suspect a heap
memory problem but both dmalloc and maybe valgrind don&rsquo;t show any problems.  One of the big problems with debugging is
that it is very difficult to do it without effecting how the program is run.  Sometimes errors are due to subtle race
conditions that are only seen when the program is running at full speed &ndash; not slowed down by debugging code.
</p>
<p>This is especially true with threaded code which is often heavily affected when used with dmalloc and valgrind.  Older
versions of valgrid (maybe current) forced all threads into a single virtual system by design, which often masks
reentrance bugs.
</p>
<p>One way to work through these issues is to run with the library with very few debugging flags enabled.  Many memory
problems are fence-post areas so start with dmalloc checking just the fence post and error logging enabled:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">dmalloc -d 0 -l dmalloc.log -p log-stats -p log-non-free -p check-fence -p check-funcs 
</pre></td></tr></table>

<p>This enabled a small number of checks and should cause your program to run at close to full speed.  The library has
never been optimized for speed so some performance penalties will be felt.
</p>

<hr size="6">
<a name="Dmalloc-Program"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Other-Hints" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell-Alias" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Programming" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dmalloc-Utility-Program"></a>
<h1 class="chapter">4. Dmalloc Utility Program</h1>

<a name="index-dmalloc-program"></a>
<a name="index-dmalloc-utility"></a>
<a name="index-utility-program"></a>
<a name="index-library-utility"></a>

<p>The dmalloc program is designed to assist in the setting of the environment variable &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo;.
See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.  It is designed to print the shell commands necessary to make the appropriate changes to
the environment.  Unfortunately, it cannot make the changes on its own so the output from dmalloc should be sent through
the <code>eval</code> shell command which will do the commands.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Using a shell alias with the utility.
</td></tr>
<tr><td align="left" valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               How to use the dmalloc program.
</td></tr>
<tr><td align="left" valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Environment variable name and features.
</td></tr>
<tr><td align="left" valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Description of the debugging tokens.
</td></tr>
<tr><td align="left" valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     Format of the runtime configuration file.
</td></tr>
</table>


<hr size="6">
<a name="Shell-Alias"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Utility-Usage" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Using-a-Shell-Alias-with-the-Utility"></a>
<h2 class="section">4.1 Using a Shell Alias with the Utility</h2>

<p>The dmalloc program is designed to assist in the setting of the environment variable &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo;.
See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.  It is designed to print the shell commands necessary to make the appropriate changes to
the environment.  Unfortunately, it cannot make the changes on its own so the output from dmalloc should be sent through
the <code>eval</code> shell command which will do the commands.
</p>
<a name="index-alias_002c-shell-1"></a>
<a name="index-bash-shell-1"></a>
<a name="index-ksh-shell-1"></a>
<a name="index-zsh-shell-1"></a>

<p>With shells that have aliasing or macro capabilities: csh, bash, ksh, tcsh, zsh, etc., setting up an alias to dmalloc to
do the eval call is recommended.  Bash, ksh, and zsh users should add the following to their &lsquo;<tt>.bashrc</tt>&rsquo;,
&lsquo;<tt>.profile</tt>&rsquo;, or &lsquo;<tt>.zshrc</tt>&rsquo; file respectively (notice the <kbd>-b</kbd> option for bourne shell output):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">function dmalloc { eval `command dmalloc -b $*`; }
</pre></td></tr></table>

<p>If your shell does not support the <code>command</code> function then try:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">function dmalloc { eval `\dmalloc -b $*`; }
</pre></td></tr></table>
<p>or use the full path to the dmalloc binary:
</p><table><tr><td>&nbsp;</td><td><pre class="example">function dmalloc { eval `/usr/local/bin/dmalloc -b $*`; }
</pre></td></tr></table>

<a name="index-tcsh-shell-1"></a>
<a name="index-csh-shell-1"></a>

<p>If you are using csh or tcsh, you should add the following to your &lsquo;<tt>.cshrc</tt>&rsquo; file (notice the <kbd>-C</kbd> option for
c-shell output):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">alias dmalloc 'eval `\dmalloc -C \!*`'
</pre></td></tr></table>

<p>This allows the user to execute the dmalloc command as &lsquo;<samp>dmalloc arguments</samp>&rsquo;.
</p>
<p>Users of versions of the Bourne shell (usually known as /bin/sh) that don&rsquo;t have command functions will need to send the
output to a temporary file and the read it back in with the &ldquo;.&rdquo; command:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$  dmalloc -b arguments &hellip; &gt; /tmp/out
$  . /tmp/out
</pre></td></tr></table>

<p>By the way, if you are looking for a shell, I heartily recommend trying out zsh.  It is a bourne shell written from
scratch with much the same features as tcsh without the csh crap.
</p>
<p><em>NOTE</em>: After you add the alias to the file you need to log out and log back in to have it take effect, or you can
execute the above appropriate command on the command line.  If you enter <kbd>dmalloc runtime</kbd> and see any output with
DMALLOC_OPTIONS in it then the alias did not work.
</p>

<hr size="6">
<a name="Utility-Usage"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Shell-Alias" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Environment-Variable" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="How-to-Use-the-Dmalloc-Program"></a>
<h2 class="section">4.2 How to Use the Dmalloc Program</h2>

<a name="index-utility-usage"></a>
<a name="index-usage-of-the-utility"></a>

<p>The most basic usage for the program is &lsquo;<samp>dmalloc [-bC] tag</samp>&rsquo;.  The &lsquo;<samp>-b</samp>&rsquo; or &lsquo;<samp>-C</samp>&rsquo; (either but not both flags
used at a time) are for generating Bourne or C shell type commands respectively.  dmalloc will try and use the
<code>SHELL</code> environment variable to determine whether bourne or C shell commands should be generated but you may want
to explicitly specify the correct flag.
</p>
<p>The &lsquo;<samp>tag</samp>&rsquo; argument to dmalloc should match a line from the user&rsquo;s runtime configuration file or should be one of
the built-in tags.  See section <a href="#RC-File">Format of the Runtime Configuration File</a>.  If no tag is specified and no other option-commands used, dmalloc will display the
current settings of the environment variable.  It is useful to specify one of the verbose options when doing this.
</p>
<p>To find out the usage for the debug malloc program try &lsquo;<samp>dmalloc --usage-long</samp>&rsquo;.  The standardized usage message that
will be displayed is one of the many features of the argv library included with this package.
</p>
<p>It is available on the web at URL <a href="http://256stuff.com/sources/argv/">http://256stuff.com/sources/argv/</a>.  See the documentation there for more
information.
</p>
<p>Here is a detailed list of the flags that can passed to dmalloc:
</p>
<dl compact="compact">
<dt> <code>-a address</code></dt>
<dd><p>Set the &lsquo;<samp>addr</samp>&rsquo; part of the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; variable to address (or alternatively address:number).
</p>
</dd>
<dt> <code>-b</code></dt>
<dd><p>Output Bourne shell type commands.  Usually handled automagically.
</p>
</dd>
<dt> <code>-C</code></dt>
<dd><p>Output C shell type commands.  Usually handled automagically.
</p>
</dd>
<dt> <code>-c</code></dt>
<dd><p>Clear/unset all of the settings not specified with other arguments.  You can do this automatically when you set to a new
tag with the <kbd>-r</kbd> option.
</p>
<p><em>NOTE</em>: clear will never unset the &lsquo;<samp>debug</samp>&rsquo; setting.  Use <kbd>-d 0</kbd> or a tag to &lsquo;<samp>none</samp>&rsquo; to achieve this.
</p>
</dd>
<dt> <code>-d bitmask</code></dt>
<dd><p>Set the &lsquo;<samp>debug</samp>&rsquo; part of the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; env variable to the bitmask value which should be in hex.  This
is overridden (and unnecessary) if a tag is specified.
</p>
</dd>
<dt> <code>-D</code></dt>
<dd><p>List all of the debug-tokens.  Useful for finding a token to be used with the <kbd>-p</kbd> or <kbd>-m</kbd> options.  Use with
<kbd>-v</kbd> or <kbd>-V</kbd> verbose options.
</p>
</dd>
<dt> <code>-e errno</code></dt>
<dd><p>Print the dmalloc error string that corresponds to the error number errno.
</p>
</dd>
<dt> <code>-f filename</code></dt>
<dd><p>Use this configuration file instead of the RC file &lsquo;<tt>$HOME/.dmallocrc</tt>&rsquo;.
</p>
</dd>
<dt> <code>-g</code></dt>
<dd><p>Output gdb type commands for using inside of the gdb debugger.
</p>
</dd>
<dt> <code>-h (or --help)</code></dt>
<dd><p>Output a help message for the utility.
</p>
</dd>
<dt> <code>-i number</code></dt>
<dd><a name="index-interval-setting"></a>
<p>Set the checking interval to number.  If the <code>check-heap</code> token is enabled, this causes the library to only check
the heap every Nth time which can <em>significantly</em> increase the running speed of your program.  If a problem is
found, however, this limits your ability to determine when the problem occurred.  Try values of 50 or 100 initially.
</p>
</dd>
<dt> <code>-k</code></dt>
<dd><p>Do not reset all of the settings when a tag is specified.  This specifically overrides the <kbd>-r</kbd> option and is
provided here to override <kbd>-r</kbd> if it has been added to the dmalloc alias.
</p>
</dd>
<dt> <code>-l filename</code></dt>
<dd><p>Write the debugging output and other log-file information to the filename.  Filename can include some of the following
patterns which get expanded into strings:
</p>
<dl compact="compact">
<dd>
<a name="index-_0025h"></a>
<a name="index-gethostname-function-usage"></a>
<a name="index-hostname-in-logfile-path"></a>
<a name="index-name-of-host-in-logfile-path"></a>
</dd>
<dt> <code>%h</code></dt>
<dd><p>Gets expanded into the hostname if the <code>gethostname()</code> function is available.
</p>
<a name="index-_0025i"></a>
<a name="index-thread_002did-in-logfile-path"></a>
</dd>
<dt> <code>%i</code></dt>
<dd><p>Gets expanded into the thread-id if the library has been configure to be used with threads.  See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
See the end of the &lsquo;<tt>settings.dist</tt>&rsquo; file for settings which return the thread-id and convert it into a string.
</p>
<a name="index-_0025p"></a>
<a name="index-getpid-function-usage"></a>
<a name="index-pid-in-logfile-path"></a>
<a name="index-process_002did-in-logfile-path"></a>
</dd>
<dt> <code>%p</code></dt>
<dd><p>Gets expanded into the process-id if the <code>getpid()</code> function is available.
</p>
<a name="index-_0025t"></a>
<a name="index-time-function-usage"></a>
<a name="index-time-in-logfile-path"></a>
</dd>
<dt> <code>%t</code></dt>
<dd><p>Gets expanded into the time value in seconds if the <code>time()</code> function is available.
</p>
<a name="index-_0025u"></a>
<a name="index-getuid-function-usage"></a>
<a name="index-uid-in-logfile-path"></a>
<a name="index-user_002did-in-logfile-path"></a>
</dd>
<dt> <code>%u</code></dt>
<dd><p>Gets expanded into the user-id number if the <code>getuid()</code> function is available.
</p>
</dd>
</dl>

<p>Some examples:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># logfile produced with pid extension:
#   logfile.8412  or  logfile.31451
dmalloc -l logfile.%p

# hostname and time extensions:
#   dmalloc-box1.foo.com-1055213240
dmalloc -l dmalloc-%h-%t

# if threads enabled, have thread-id extension:  log.thread32
dmalloc -l log.thread%i
</pre></td></tr></table>

</dd>
<dt> <code>-L</code></dt>
<dd><p>Write the debug-value into the environment not in hex but by individual debug-tokens in long form.
</p>
</dd>
<dt> <code>-m token(s)</code></dt>
<dd><p>Remove (minus) the debug capabilities of token(s) from the current debug setting or from the selected tag (or <kbd>-d</kbd>
value).  Multiple <kbd>-m</kbd> options can be specified.
</p>
<a name="index-memory-limit-1"></a>
<a name="index-ERROR_005fOVER_005fLIMIT-1"></a>
</dd>
<dt> <code>-M limit</code></dt>
<dd><p>Set the memory allocation limit which will abort the program if the total memory allocations exceed this number of
bytes.  The limit can be a number with a k, m, or g at the end to indicate kilobyte, megabyte, and gigabyte
respectively.  Ex: 100k, 200m, 1g.  If the limit is exceeded, this will generate an <code>ERROR_OVER_LIMIT</code> error.
See section <a href="#Error-Codes">Description of the Internal Error Codes</a>.
</p>
</dd>
<dt> <code>-n</code></dt>
<dd><p>Without changing the environment, output the commands resulting from the supplied options.
</p>
<a name="index-lock-on-1"></a>
</dd>
<dt> <code>-o times</code></dt>
<dd><p>Set the &ldquo;lock-on&rdquo; period which dictates to the threaded version of the library to not initialize or lock the mutex
lock around the library until after a certain number of allocation calls have been made.  Some number between 2 and 30
is probably good.  See the &ldquo;Using With Threads&rdquo; section for more information about the operation of the library with
threads.  See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
</p>
</dd>
<dt> <code>-p token(s)</code></dt>
<dd><p>Add (plus) the debug capabilities of token(s) to the current debug setting or to the selected tag (or <kbd>-d</kbd> value).
Multiple <kbd>-p</kbd> options can be specified.
</p>
</dd>
<dt> <code>-r</code></dt>
<dd><p>Remove (unset) all settings when using a tag.  This is useful when you are returning to a standard development tag and
want the logfile, address, and interval settings to be cleared automatically.  If you want this behavior by default,
this can be put into the dmalloc alias.
</p>
</dd>
<dt> <code>-R</code></dt>
<dd><p>Output rc shell type commands.  This is not for the runtime configuration file but for the rc shell program.
</p>
<a name="index-delay-heap-checking"></a>
<a name="index-start-heap-check-later"></a>
</dd>
<dt> <code>-s file:line</code></dt>
<dd><p>Set the &lsquo;<samp>start</samp>&rsquo; part of the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; env variable to a file-name and line-number location in the
source where the library should begin more extensive heap checking.  The file and line numbers for heap transactions
must be working for this option to be obeyed.  This is used if you are trying to locate a problem and you want the
extensive checking to not happen initially because it&rsquo;s too slow.
</p>
<a name="index-delay-heap-checking-1"></a>
<a name="index-start-heap-check-later-1"></a>
<a name="index-LOG_005fITERATION-1"></a>
<a name="index-interaction-count-1"></a>
<a name="index-transaction-count-1"></a>
<a name="index-mark-count"></a>
<a name="index-memory-transaction-count-1"></a>
</dd>
<dt> <code>-S number</code></dt>
<dd><p>Set the &lsquo;<samp>start</samp>&rsquo; part of the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; env variable to an dmalloc mark number.  The library will begin
more extensive heap checking after this number of memory transactions.  If you <code>LOG_ITERATION</code> enabled in your
&lsquo;<tt>settings.h</tt>&rsquo; file then the entries in the log file will be prepended with the number of memory transactions that
the library has handled so far.  This number can be used to delay the start of the fine grained heap checking which can
be very slow.
</p>
<a name="index-delay-heap-checking-2"></a>
<a name="index-start-heap-check-later-2"></a>
</dd>
<dt> <code>--start-size size</code></dt>
<dd><p>Set the &lsquo;<samp>start</samp>&rsquo; part of the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; env variable to a number of bytes.  The library will begin more
extensive heap checking after this amount of memory has been allocated by the library.  This allows you to start the
slow and detailed checking of the library later in the program execution.  You can use patterns like 250m, 1g, or 102k
to mean 250 megabytes, 1 gigabyte, and 102 kilobytes respectively.
</p>
</dd>
<dt> <code>-t</code></dt>
<dd><p>List all of the tags in the rc-file.  Use with <kbd>-v</kbd> or <kbd>-V</kbd> verbose options.
</p>
</dd>
<dt> <code>-u (or --usage)</code></dt>
<dd><p>Output the usage information for the utility.
</p>
</dd>
<dt> <code>-v</code></dt>
<dd><p>Give verbose output.  Especially useful when dumping current settings or listing all of the tags.
</p>
</dd>
<dt> <code>-V</code></dt>
<dd><p>Give very verbose output for outputting even more details about settings.
</p>
<a name="index-utility-version"></a>
<a name="index-library-version"></a>
<a name="index-version-of-utility"></a>
</dd>
<dt> <code>--version</code></dt>
<dd><p>Output the version string for the utility.  <em>Please note</em> that the version of the library that is installed or has
been linked into your application may be different from the utility version.
</p>
</dd>
</dl>

<p>If no arguments are specified, dmalloc dumps out the current settings that you have for the environment variable.  For
example:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">Debug-Flags  '0x40005c7' (runtime)
Address      0x1f008, count = 3
Interval     100
Logpath      'malloc'
Start-File   not-set
</pre></td></tr></table>

<p>With a -v option and no arguments, dmalloc dumps out the current settings in a verbose manner.  For example:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">Debug-Flags  '0x40005c7' (runtime)
   log-stats, log-non-free, log-bad-space, check-fence, catch-null
Address      0x1f008, count = 10
Interval     100
Logpath      'malloc'
Start-File   not-set
</pre></td></tr></table>

<p>Here are some examples of dmalloc usage:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># start tough debugging, check the heap every 100 times,
# send the log information to file 'logfile'
dmalloc high -i 100 -l logfile

# find out what error code 20 is (from the logfile)
dmalloc -e 20

# cause the library to halt itself when it sees the address 0x34238
# for the 6th time.
dmalloc -a 0x34238:6

# send the log information to file 'logfile' with the time in seconds
# as an extension.
dmalloc -l logfile.%t

# return to the normal 'runtime' settings and clear out all
# other settings
dmalloc -c runtime

# enable basic 'low' settings plus (-p) the logging of
# transactions (log-trans) to file 'logfile'
dmalloc low -p log-trans -l logfile

# print out the current settings with Very-verbose output
dmalloc -V

# list the available debug malloc tokens with Very-verbose output
dmalloc -DV

# list the available tags from the rc file with verbose output
dmalloc -tv
</pre></td></tr></table>


<hr size="6">
<a name="Environment-Variable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Utility-Usage" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Debug-Tokens" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Environment-Variable-Name-and-Features"></a>
<h2 class="section">4.3 Environment Variable Name and Features</h2>

<a name="index-environment-variable"></a>
<a name="index-DMALLOC_005fOPTIONS"></a>

<p>An <em>environment variable</em> is a variable that is part of the user&rsquo;s working environment and is shared by all the
programs.  The &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; variable is used by the dmalloc library to enable or disable the memory debugging
features, at runtime.  <em>NOTE:</em> you can also use the <code>dmalloc_debug_setup</code> function to set the option string.
It can be set either by hand or with the help of the dmalloc program.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
<a name="index-shell-usage"></a>

<a name="index-Bourne-shell-usage"></a>
<a name="index-sh-usage"></a>
<a name="index-bash-usage"></a>
<a name="index-ksh-usage"></a>
<a name="index-zsh-usage"></a>
<p>To set it by hand, Bourne shell (sh, bash, ksh, or zsh) users should use:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">DMALLOC_OPTIONS=value
export DMALLOC_OPTIONS
</pre></td></tr></table>

<a name="index-C-shell-usage"></a>
<a name="index-csh-usage"></a>
<a name="index-tcsh-usage"></a>
<p>C shell (csh or tcsh) users need to invoke:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">setenv DMALLOC_OPTIONS value
</pre></td></tr></table>

<p>The value in the above examples is a comma separated list of tokens each having a corresponding value.  The tokens are
described below:
</p>
<dl compact="compact">
<dt> <code>debug</code></dt>
<dd><a name="index-debug-setting"></a>
<p>This should be set to a value in hexadecimal which corresponds to the functionality token values added together.
See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.  For instance, if the user wanted to enable the logging of memory transactions (value &lsquo;<samp>0x008</samp>&rsquo;)
and wanted to check fence-post memory (value &lsquo;<samp>0x400</samp>&rsquo;) then &lsquo;<samp>debug</samp>&rsquo; should be set to &lsquo;<samp>0x408</samp>&rsquo; (&lsquo;<samp>0x008</samp>&rsquo;
+ &lsquo;<samp>0x400</samp>&rsquo;).
</p>
<p><em>NOTE</em>: You don&rsquo;t have to worry about remembering all the hex values of the tokens because the dmalloc program
automates the setting of this variable especially.
</p>
<a name="index-comma-separated-tokens-in-env-variable"></a>

<p><em>NOTE</em>: You can also specify the debug tokens directly, separated by commas.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.  If &lsquo;<samp>debug</samp>&rsquo;
and the tokens are both used, the token values will be added to the debug value.
</p>
</dd>
<dt> <code>lockon</code></dt>
<dd><a name="index-lockon-setting"></a>
<p>Set this to a number which is the &ldquo;lock-on&rdquo; period.  This dictates to the threaded version of the library to not
initialize or lock the mutex lock around the library until after a certain number of allocation calls have been made.
See the &ldquo;Using With Threads&rdquo; section for more information about the operation of the library with threads.
See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
</p>
</dd>
<dt> <code>log</code></dt>
<dd><a name="index-logfile-setting"></a>
<a name="index-logging-information-to-disk"></a>
<p>Set this to a filename so that if &lsquo;<samp>debug</samp>&rsquo; has logging enabled, the library can log transactions, administration
information, and/or errors to the file so memory problems and usage can be tracked.
</p>
<p>To get different logfiles for different processes, you can assign &lsquo;<samp>log</samp>&rsquo; to a string with <code>%d</code> in it (for
instance &lsquo;<samp>logfile.%d</samp>&rsquo;).  This will be replaced with the pid of the running process (for instance
&lsquo;<samp>logfile.2451</samp>&rsquo;).
</p>
<p><em>WARNING</em>: it is easy to core dump any program with dmalloc, if you send in a format with arguments other than the
one <code>%d</code>.
</p>
</dd>
<dt> <code>addr</code></dt>
<dd><a name="index-address-setting"></a>
<a name="index-address-locating"></a>
<a name="index-tracking-addresses"></a>
<p>When this is set to a hex address (taken from the dmalloc log-file for instance) dmalloc will abort when it finds itself
either allocating or freeing that address.
</p>
<p>The address can also have an &lsquo;<samp>:number</samp>&rsquo; argument.  For instance, if it was set it to &lsquo;<samp>0x3e45:10</samp>&rsquo;, the library
will kill itself the 10th time it sees address &lsquo;<samp>0x3e45</samp>&rsquo;.  By setting the number argument to 0, the program will
never stop when it sees the address.  This is useful for logging all activity on the address and makes it easier to
track down specific addresses not being freed.
</p>
<p>This works well in conjunction with the <code>STORE_SEEN_COUNT</code> option.  See section <a href="#Memory-Leaks">Tracking Down Non-Freed Memory</a>.
</p>
<p><em>NOTE</em>: dmalloc will also log all activity on this address along with a count.
</p>
</dd>
<dt> <code>inter</code></dt>
<dd><a name="index-interval-setting-1"></a>
<p>By setting this to a number X, dmalloc will only check the heap every X times.  This means a number of debugging
features can be enabled while still running the program within a finite amount of time.
</p>
<p>A setting of &lsquo;<samp>100</samp>&rsquo; works well with reasonably memory intensive programs.  This of course means that the library
will not catch errors exactly when they happen but possibly 100 library calls later.
</p>
</dd>
<dt> <code>start</code></dt>
<dd><a name="index-start-setting"></a>
<p>Set this to a number X and dmalloc will begin checking the heap after X times.  This means the intensive debugging can
be started after a certain point in a program.
</p>
<p>&lsquo;<samp>start</samp>&rsquo; also has the format &lsquo;<samp>file:line</samp>&rsquo;.  For instance, if it is set to &lsquo;<samp>dmalloc_t.c:126</samp>&rsquo; dmalloc will
start checking the heap after it sees a dmalloc call from the &lsquo;<tt>dmalloc_t.c</tt>&rsquo; file, line number 126.  If you use
&lsquo;<samp>dmalloc_t.c:0</samp>&rsquo;, with a 0 line number, then dmalloc will start checking the heap after it sees a call from anywhere
in the &lsquo;<tt>dmalloc_t.c</tt>&rsquo; file.
</p>
<p>This allows the intensive debugging to be started after a certain routine or file has been reached in the program.
</p></dd>
</dl>

<p>Some examples are:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># turn on transaction and stats logging and set
# 'logfile' as the log-file
setenv DMALLOC_OPTIONS log-trans,log-stats,log=logfile

# enable debug flags 0x1f as well as heap-checking and
# set the interval to be 100
setenv DMALLOC_OPTIONS debug=0x1f,check-heap,inter=100

# enable 'logfile' as the log-file, watch for
# address '0x1234', and start checking when we see
# file.c line 123
setenv DMALLOC_OPTIONS log=logfile,addr=0x1234,start=file.c:123
</pre></td></tr></table>


<hr size="6">
<a name="Debug-Tokens"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Environment-Variable" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#RC-File" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Description-of-the-Debugging-Tokens"></a>
<h2 class="section">4.4 Description of the Debugging Tokens</h2>

<a name="index-debug-tokens"></a>
<a name="index-tokens_002c-debug"></a>

<p>The below tokens and their corresponding descriptions are for the setting of the debug library setting in the
environment variable.  See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.  They should be specified in the user&rsquo;s &lsquo;<tt>.dmallocrc</tt>&rsquo; file.
See section <a href="#RC-File">Format of the Runtime Configuration File</a>.
</p>
<p>Each token, when specified, enables a specific debugging feature.  For instance, if you have the <code>log-stats</code> token
enabled, the library will log general statistics to the logfile.
</p>
<p>To get this information on the fly, use <kbd>dmalloc -DV</kbd>.  This will print out the Debug tokens in Very-verbose mode.
See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
<dl compact="compact">
<dd><a name="index-none-token"></a>
</dd>
<dt> <code>none</code></dt>
<dd><p>No debugging functionality
</p>
<a name="index-log_002dstats"></a>
</dd>
<dt> <code>log-stats</code></dt>
<dd><p>Log general statistics when dmalloc_shutdown or dmalloc_log_stats is called.
</p>
<a name="index-log_002dnon_002dfree"></a>
</dd>
<dt> <code>log-non-free</code></dt>
<dd><p>Log non-freed memory pointers when dmalloc_shutdown or dmalloc_log_unfreed is called.
</p>
<a name="index-log_002dknown"></a>
</dd>
<dt> <code>log-known</code></dt>
<dd><p>Log only known memory pointers that have not been freed.  Pointers which do not have file/line or return-address
information will not be logged.
</p>
<a name="index-log_002dtrans"></a>
</dd>
<dt> <code>log-trans</code></dt>
<dd><p>Log general memory transactions (quite verbose).
</p>
<a name="index-log_002dadmin"></a>
</dd>
<dt> <code>log-admin</code></dt>
<dd><p>Log administrative information (quite verbose).
</p>
<a name="index-log_002dbad_002dspace"></a>
</dd>
<dt> <code>log-bad-space</code></dt>
<dd><p>Log actual bytes in and around bad pointers.
</p>
<a name="index-log_002dnonfree_002dspace"></a>
</dd>
<dt> <code>log-nonfree-space</code></dt>
<dd><p>Log actual bytes in non-freed pointers.
</p>
<a name="index-log_002delapsed_002dtime"></a>
</dd>
<dt> <code>log-elapsed-time</code></dt>
<dd><p>Log elapsed-time for allocated pointers (see &lsquo;<tt>conf.h</tt>&rsquo;).
</p>
<a name="index-log_002dcurrent_002dtime"></a>
</dd>
<dt> <code>log-current-time</code></dt>
<dd><p>Log current-time for allocated pointers (see &lsquo;<tt>conf.h</tt>&rsquo;).
</p>
<a name="index-check_002dfence"></a>
</dd>
<dt> <code>check-fence</code></dt>
<dd><p>Check fence-post memory areas.
</p>
<a name="index-check_002dheap-1"></a>
</dd>
<dt> <code>check-heap</code></dt>
<dd><p>Verify heap administrative structure.
</p>
<a name="index-check_002dblank-1"></a>
</dd>
<dt> <code>check-blank</code></dt>
<dd><p>Check to see if space that was blanked when a pointer was allocated or when it was freed has been overwritten.  If this
is enabled then it will enable <code>free-blank</code> and <code>alloc-blank</code> automatically.
</p>
<a name="index-check_002dfuncs"></a>
</dd>
<dt> <code>check-funcs</code></dt>
<dd><p>Check the arguments of some functions (mostly string operations) looking for bad pointers.
</p>
<a name="index-check_002dshutdown"></a>
</dd>
<dt> <code>check-shutdown</code></dt>
<dd><p>Check all of the pointers in the heap when the program exits.
</p>
<a name="index-catch_002dsignals"></a>
<a name="index-signal-shutdown"></a>
<a name="index-shutdown-on-signal"></a>
<a name="index-SIGHUP"></a>
<a name="index-SIGINT"></a>
<a name="index-SIGTERM"></a>
<a name="index-HUP-signal"></a>
<a name="index-INT-signal"></a>
<a name="index-TERM-signal"></a>
</dd>
<dt> <code>catch-signals</code></dt>
<dd><p>Shutdown the library automatically on SIGHUP, SIGINT, or SIGTERM.  This will cause the library to dump its statistics
(if requested) when you press control-c on the program (for example).
</p>
<a name="index-realloc_002dcopy"></a>
</dd>
<dt> <code>realloc-copy</code></dt>
<dd><p>Always copy data to a new pointer when realloc.
</p>
<a name="index-blank-space"></a>
<a name="index-blanking-memory"></a>
<a name="index-overwriting-memory"></a>
<a name="index-clearing-memory"></a>
<a name="index-decimal-223-character"></a>
<a name="index-223-character"></a>
<a name="index-octal-337-character"></a>
<a name="index-337-character"></a>
<a name="index-0337-character"></a>
<a name="index-hexadecimal-0xdf-character"></a>
<a name="index-0xdf-character"></a>
<a name="index-df-character"></a>
<a name="index-free_002dblank-1"></a>
<a name="index-ERROR_005fFREE_005fOVERWRITTEN-1"></a>
</dd>
<dt> <code>free-blank</code></dt>
<dd><p>Write special &ldquo;dmalloc-free&rdquo; byte (hexadecimal <code>0xdf</code>, octal <code>0337</code>, decimal <code>223</code>) into space when it
is freed.  You can set this to be something else in the &lsquo;<tt>settings.dist</tt>&rsquo; file.  This ensures that your program is
not using memory after it has been freed.  You can check to see if areas have been improperly overwritten with the
<code>check-blank</code> token.  If the free space has been overwritten, then <code>ERROR_FREE_OVERWRITTEN</code> is triggered.
See section <a href="#Error-Codes">Description of the Internal Error Codes</a>.
</p>
<a name="index-dump-core-2"></a>
<a name="index-core-dump-2"></a>
<a name="index-error_002dabort-1"></a>
</dd>
<dt> <code>error-abort</code></dt>
<dd><p>Abort the program (and dump core) on errors.  See <code>error-dump</code> below.  See section <a href="#Dumping-Core">Generating a Core File on Errors</a>.
</p>
<a name="index-blank-space-1"></a>
<a name="index-blanking-memory-1"></a>
<a name="index-overwriting-memory-1"></a>
<a name="index-clearing-memory-1"></a>
<a name="index-decimal-218-character"></a>
<a name="index-218-character"></a>
<a name="index-octal-332-character"></a>
<a name="index-332-character"></a>
<a name="index-0332-character"></a>
<a name="index-hexadecimal-0xda-character"></a>
<a name="index-0xda-character"></a>
<a name="index-da-character"></a>
<a name="index-alloc_002dblank"></a>
</dd>
<dt> <code>alloc-blank</code></dt>
<dd><p>Write special &ldquo;dmalloc-alloc&rdquo; byte (hexadecimal <code>0xda</code>, octal <code>0332</code>, decimal <code>218</code>) into space when it
is allocated.  You can set this to be something else in the &lsquo;<tt>settings.dist</tt>&rsquo; file.  If you are not using
<code>calloc</code> this will overwrite the user space with the special bytes ensuring that your program is initializing its
dynamic memory appropriately.  Also, if you ask for 35 bytes and the library has to give you a block of 64 because of
rounding issues, it will overwrite the extra memory with the special byte.  You can then check to see if the extra areas
have been improperly overwritten by enabling the <code>check-blank</code> token.
</p>
<a name="index-print_002dmessages"></a>
</dd>
<dt> <code>print-messages</code></dt>
<dd><p>Log any errors and messages to the screen via standard-error.
</p>
<a name="index-mmap-3"></a>
<a name="index-sbrk-2"></a>
<a name="index-catch_002dnull"></a>
</dd>
<dt> <code>catch-null</code></dt>
<dd><p>Abort the program immediately if the library fails to get more heap space from the heap allocation routine <code>mmap</code>
or <code>sbrk</code>.
</p>
<a name="index-never_002dreuse"></a>
</dd>
<dt> <code>never-reuse</code></dt>
<dd><p>Have the heap never use space that has been used before and freed.  See section <a href="#Memory-Leaks">Tracking Down Non-Freed Memory</a>.  <em>WARNING</em>: This should be
used with caution since you may run out of heap space.
</p>
<a name="index-dump-core-3"></a>
<a name="index-core-dump-3"></a>
<a name="index-error_002ddump-1"></a>
</dd>
<dt> <code>error-dump</code></dt>
<dd><p>Dump core on error and then continue.  Later core dumps overwrite earlier ones if the program encounters more than one
error.  See <code>error-abort</code> above.  See section <a href="#Dumping-Core">Generating a Core File on Errors</a>.
</p>
<p><em>NOTE</em>: This will only work if your system supports the <code>fork</code> system call and the configuration utility was
able to fork without going recursive.
</p>
<a name="index-error_002dfree_002dnull"></a>
<a name="index-ALLOW_005fFREE_005fNULL"></a>
<a name="index-ALLOW_005fFREE_005fNULL_005fMESSAGE-1"></a>

</dd>
<dt> <code>error-free-null</code></dt>
<dd><p>By default the library will not generate an error when a program tries to free a NULL pointer.  By enabling this token,
you can change this behavior so an error is reported.  See also the ALLOW_FREE_NULL and ALLOW_FREE_NULL_MESSAGE settings
in the &lsquo;<tt>settings.h</tt>&rsquo; file to change the default behavior.
</p>
</dd>
</dl>


<hr size="6">
<a name="RC-File"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Debug-Tokens" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Format-of-the-Runtime-Configuration-File"></a>
<h2 class="section">4.5 Format of the Runtime Configuration File</h2>

<a name="index-rc-file"></a>
<a name="index-runtime_002dconfig-file"></a>
<a name="index-configuration-file"></a>
<a name="index-dmallocrc-file"></a>
<a name="index-_002edmallocrc-file"></a>

<p>By using a <em>RC File</em> (or runtime configuration file) you can alias tags to combinations of debug tokens.
See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.
</p>
<p><em>NOTE</em>: For beginning users, the dmalloc program has a couple of tags built into it so it is not necessary for you
to setup a RC file:
</p>
<dl compact="compact">
<dd><a name="index-runtime-token"></a>
<a name="index-token-runtime"></a>
</dd>
<dt> <code>runtime</code></dt>
<dd><p>Enables basic runtime tests including fence-post checking, null handling, and logging of any errors.
</p>
<a name="index-low-token"></a>
<a name="index-token-low"></a>
</dd>
<dt> <code>low</code></dt>
<dd><p>Runtime settings plus minimal checking of heap structures and overwriting of allocated and freed space.
</p>
<a name="index-medium-token"></a>
<a name="index-token-medium"></a>
</dd>
<dt> <code>medium</code></dt>
<dd><p>Low settings plus checking of all heap structures on each memory call, always relocates block on realloc, and aborts on
errors.  You may want to use <kbd>-i</kbd> option to the dmalloc utility.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
<a name="index-high-token"></a>
<a name="index-token-high"></a>
</dd>
<dt> <code>high</code></dt>
<dd><p>Medium settings plus checking of overwritten freed and allocated memory and checking of arguments to a number of common
functions. You may want to use <kbd>-i</kbd> option to the dmalloc utility.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.
</p>
</dd>
</dl>

<p>For expert users, a sample &lsquo;<tt>dmallocrc</tt>&rsquo; file has been provided but you are encouraged to roll your own combinations.
The name of default rc-file is &lsquo;<tt>$HOME/.dmallocrc</tt>&rsquo;.  The &lsquo;<samp>$HOME</samp>&rsquo; environment variable should be set by the
system to point to your home-directory.
</p>
<p>The file should contain lines in the general form of:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">tag     token1, token2, &hellip;
</pre></td></tr></table>

<p>&lsquo;<samp>tag</samp>&rsquo; is to be matched with the tag argument passed to the dmalloc program, while &lsquo;<samp>token1, token2, &hellip;</samp>&rsquo;
are debug capability tokens.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>, <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.
</p>
<p>A line can be finished with a &lsquo;<samp>\</samp>&rsquo; meaning it continues onto the next line.  Lines beginning with &lsquo;<samp>#</samp>&rsquo; are
treated as comments and are ignored along with empty lines.
</p>
<p>Here is an example of a &lsquo;<tt>.dmallocrc</tt>&rsquo; file:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#
# Dmalloc runtime configuration file for the debug malloc library
#

# no debugging
none    none

# basic debugging
debug1  log-stats, log-non-free, check-fence

# more logging and some heap checking
debug2  log-stats, log-non-free, log-trans, \
        check-fence, check-heap, error-abort

# good utilities
debug3  log-stats, log-non-free, log-trans, \
        log-admin, check-fence, check-heap, realloc-copy, \
        free-blank, error-abort

&hellip;
</pre></td></tr></table>

<p>For example, with the above file installed, you can type <code>dmalloc debug1</code> after setting up your shell alias.
See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.  This enables the logging of statistics, the logging of non-freed memory, and the checking of
fence-post memory areas.
</p>
<p>Enter <code>dmalloc none</code> to disable all memory debugging features.
</p>

<hr size="6">
<a name="Source-Code"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#RC-File" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Dmalloc-Program" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Troubleshooting" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Information-on-the-Source-Code"></a>
<h1 class="chapter">5. Information on the Source Code</h1>

<a name="index-source-code"></a>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Compatibility">5.1 General Compatibility Concerns</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               General compatibility concerns.
</td></tr>
<tr><td align="left" valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Issues important for porting the library.
</td></tr>
</table>


<hr size="6">
<a name="Compatibility"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Source-Code" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portability" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Troubleshooting" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="General-Compatibility-Concerns"></a>
<h2 class="section">5.1 General Compatibility Concerns</h2>

<a name="index-compatibility"></a>

<ul>
<li>
Realloc() backwards compatibility with being able to realloc from the last freed block is <em>not</em> supported.  The
author is interested to know who is using this (cough, cough) feature and for what reason.

<a name="index-ALLOW_005fREALLOC_005fNULL-settings_002eh-option"></a>

</li><li>
Realloc() of a NULL pointer is supported in which case the library will just make a call to malloc().  This can be
disabled with the help of the <code>ALLOW_REALLOC_NULL</code> manual compilation option in the &lsquo;<tt>settings.h</tt>&rsquo; file to
adjust the library&rsquo;s default behavior.

<a name="index-ALLOW_005fFREE_005fNULL-settings_002eh-option"></a>

</li><li>
Some systems allow free(0) to not be an error for some reason.  Since 0 is not a valid address returned by the malloc
call, it is debatable that this should be allowed.  See &lsquo;<tt>settings.h</tt>&rsquo; for the <code>ALLOW_FREE_NULL</code> manual
compilation option to adjust the library&rsquo;s default behavior.

</li><li>
Aside from possibly being slower than the system&rsquo;s memory allocation functions, the library should be fully compatible
with the standard memory routines.  If this is <em>not</em> the case, please bring this to my attention.
</li></ul>


<hr size="6">
<a name="Portability"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Compatibility" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Troubleshooting" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Troubleshooting" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Issues-Important-for-Porting-the-Library"></a>
<h2 class="section">5.2 Issues Important for Porting the Library</h2>

<a name="index-portability"></a>

<p>General portability issues center around:
</p>
<ul>
<li>
<a name="index-mmap_002c-usage-without"></a>
<a name="index-sbrk_002c-usage-without"></a>
<a name="index-preallocated-memory-heap"></a>
<a name="index-INTERNAL_005fMEMORY_005fSPACE"></a>
mmap, sbrk, or compatible function usages.  The library does support a preallocated memory chunk heap.  See the
<code>INTERNAL_MEMORY_SPACE</code> define in the &lsquo;<tt>settings.dist</tt>&rsquo; file.

</li><li>
<a name="index-return_002daddress-2"></a>
The locating of the caller&rsquo;s address from the dmalloc functions.  This is useful in locating problems from dmalloc
functions called from C files which did not include &lsquo;<tt>dmalloc.h</tt>&rsquo;: C library calls for instance.

<a name="index-gcc"></a>
<p>See &lsquo;<tt>return.h</tt>&rsquo; for the available architecture/compiler combinations.  You may want to examine the assembly code
from gcc (GNUs superior c-compiler) version 2+ being run on the following code.  It should give you a good start on
building a hack for your box.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">static char * x;

a()
{
   x = __builtin_return_address(0);
}

main()
{
   a();
}
</pre></td></tr></table>

</li></ul>


<hr size="6">
<a name="Troubleshooting"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Portability" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Source-Code" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Some-Solutions-to-Common-Problems"></a>
<h1 class="chapter">6. Some Solutions to Common Problems</h1>

<a name="index-troubleshooting"></a>
<a name="index-common-problems"></a>
<a name="index-help"></a>
<a name="index-how-do-i_002e_002e_002e"></a>
<a name="index-faq"></a>
<a name="index-questions"></a>
<a name="index-problems"></a>

<p>This section provides some answers to some common problems and questions.  Please send me mail with any additions to
this list &ndash; either problems you are still having or tips that you would like to pass on.
</p>
<p>When diagnosing a problem, if possible, always make sure you are running the most up to date version of Dmalloc
available from the home page at URL <a href="http://dmalloc.com/">http://dmalloc.com/</a>.  Problems are often fixed and a new release can be
published before people encounter them.
</p>
<dl compact="compact">
<dd>
<a name="index-slow-running"></a>
<a name="index-why-running-slow"></a>
<a name="index-too-slow"></a>
<a name="index-why-hanging"></a>
<a name="index-hanging-program"></a>
</dd>
<dt> &lsquo;<samp>Why does my program run so slow?</samp>&rsquo;</dt>
<dd>
<a name="index-check_002dheap-2"></a>
<p>This library has never been (and maybe never will be) optimized for space nor speed.  Some of its features make it
unable to use some of the organizational methods of other more efficient heap libraries.
</p>
<p>If you have the <code>check-heap</code> token enabled, your program might run slow or seem to hang.  This is because by
default, the library will run a full check of the heap with every memory allocation or free.  You can have the library
check itself less frequently by using the <kbd>-i</kbd> option to the dmalloc utility.  See section <a href="#Dmalloc-Program">Dmalloc Utility Program</a>.  If you are
using the <kbd>high</kbd> token and you need your program to run faster, try the <kbd>medium</kbd> or <kbd>low</kbd> tokens which don&rsquo;t
check as many heap features and so run faster although they will not catch as many problems. See section <a href="#RC-File">Format of the Runtime Configuration File</a>.
</p>
<a name="index-logfile-not-produced"></a>
<a name="index-no-logfile-produced"></a>
</dd>
<dt> &lsquo;<samp>Why was a log-file not produced after I ran my program?</samp>&rsquo;</dt>
<dd>
<p>This could be caused by a number of different problems.
</p>
<ol>
<li> Are you sure you followed all of the items in the &ldquo;Getting Started&rdquo;
section?  Please review them if there is any doubt.  See section <a href="#Getting-Started">Getting Started with the Library</a>.

<a name="index-env"></a>
<a name="index-printenv"></a>
<a name="index-DMALLOC_005fOPTIONS-1"></a>

</li><li> Use the <kbd>env</kbd> or <kbd>printenv</kbd> commands to make sure that
the &lsquo;<samp>DMALLOC_OPTIONS</samp>&rsquo; variable is set in your exported environment.  See section <a href="#Environment-Variable">Environment Variable Name and Features</a>.

<a name="index-ident"></a>
<a name="index-strings"></a>

</li><li> Make sure that your program has been compiled correctly with the
dmalloc library.  The <kbd>ident</kbd> program should show chunk.c and other dmalloc files compiled into your program.  You
can also do <kbd>strings -a your-program | grep chunk.c</kbd> and look for something like &lsquo;<samp>$Id: chunk.c,v 1.152
1999/08/25 12:37:01 gray Exp $</samp>&rsquo; with different versions and date information.  If this doesn&rsquo;t show up then chances are
dmalloc was not linked into your program.

</li><li> If your program changes its working directory, it may write the
dmalloc log-file somewhere else in the filesystem.  You will need to check both where the program was started and to
where it might change directory.

</li><li> The logfile is only produced when <code>dmalloc_shutdown()</code> is
called.  By default it will be called when <code>exit()</code> gets called.  If you are running your program and press
<kbd>Control-C</kbd> under Unix the program will stop immediately and <code>dmalloc_shutdown()</code> will not get called.  You can
either setup a signal handler for <code>SIGINTR</code> and call exit yourself, or you can enable the <code>catch-signals</code>
token.  See section <a href="#Debug-Tokens">Description of the Debugging Tokens</a>.

</li><li> If your program is segfaulting or otherwise crashing when it exits, the
<code>exit()</code> routine may not being called.  You will have to resolve these issues so the dmalloc library can gracefully
exit and write its log file.

</li><li> You may want to call <code>dmalloc_log_stats()</code> and
<code>dmalloc_log_unfreed()</code> (or <code>dmalloc_log_changed()</code>) directly to have the library write its log file.  Some
system modules may not have shutdown if you call this before <code>exit()</code> so extra unfreed memory may be reported.

</li></ol>

</dd>
<dt> &lsquo;<samp>I don't see any information about my non-freed (leaked) memory?</samp>&rsquo;</dt>
<dd>
<p>The library will not (by default) report on &ldquo;unknown&rdquo; non-freed memory.  Unknown means memory that does not have
associated file and line information.
</p>
<p>This will be necessary if you are <em>not</em> including &lsquo;<tt>dmalloc.h</tt>&rsquo; in all of your C files or if you are interested
in tracking leaks in system functions.
</p>
</dd>
<dt> &lsquo;<samp>Dmalloc is returning the error &quot;malloc library has gone recursive&quot;</samp>&rsquo;</dt>
<dd>
<p>This most likely indicates that you are using the Dmalloc library within a threaded application and two threads are
trying to use the dmalloc library at once.  Please see the section of the manual about threads for more information
about properly configuring the library.  See section <a href="#Using-With-Threads">Using the Library with a Thread Package</a>.
</p>
<p>If you are not using threads, then your program could have caught a signal while within Dmalloc, which then in turn
called a memory allocation routine.  It is unwise to allocate memory on the heap in most signal handlers.  Lastly, some
functions called by the library may call memory routines that it does not anticipate.  If you think this the case,
please report the problem and include a stack trace, operating system version/type, and the version of Dmalloc you are
using.
</p>
</dd>
</dl>


<hr size="6">
<a name="Index-of-Concepts"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Troubleshooting" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[ &gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Troubleshooting" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Index-of-Concepts-1"></a>
<h1 class="unnumbered">Index of Concepts</h1>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Index-of-Concepts-1_cp_symbol-1" class="summary-letter"><b>%</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-2" class="summary-letter"><b>-</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-3" class="summary-letter"><b>.</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-4" class="summary-letter"><b>0</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-5" class="summary-letter"><b>1</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-6" class="summary-letter"><b>2</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-7" class="summary-letter"><b>3</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-8" class="summary-letter"><b>4</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-9" class="summary-letter"><b>6</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-10" class="summary-letter"><b>7</b></a>
 &nbsp; 
<br>
<a href="#Index-of-Concepts-1_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-J" class="summary-letter"><b>J</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-Q" class="summary-letter"><b>Q</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-Z" class="summary-letter"><b>Z</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-cp">
<tr><td></td><th align="left">Index Entry</th><th align="left"> Section</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-1">%</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025h">%h</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025i">%i</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025p">%p</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025t">%t</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025u">%u</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-2">-</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddisable_002dcxx">&ndash;disable-cxx</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002denable_002dshlib">&ndash;enable-shlib</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002denable_002dthreads">&ndash;enable-threads</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-3">.</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002edmallocrc-file">.dmallocrc file</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-4">0</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-0332-character">0332 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-0337-character">0337 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-0xda-character">0xda character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-0xdf-character">0xdf character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-5">1</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-1_002c-error-code">1, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-10_002c-error-code">10, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-11_002c-error-code">11, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-13_002c-error-code">13, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-6">2</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-2_002c-error-code">2, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-20_002c-error-code">20, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-21_002c-error-code">21, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-218-character">218 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-22_002c-error-code">22, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-223-character">223 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-23_002c-error-code">23, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-24_002c-error-code">24, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-25_002c-error-code">25, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-26_002c-error-code">26, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-27_002c-error-code">27, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-28_002c-error-code">28, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-7">3</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-30_002c-error-code">30, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-332-character">332 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-337-character">337 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-8">4</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-40_002c-error-code">40, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-41_002c-error-code">41, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-43_002c-error-code">43, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-45_002c-error-code">45, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-9">6</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-60_002c-error-code">60, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-61_002c-error-code">61, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-67_002c-error-code">67, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_symbol-10">7</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-70_002c-error-code">70, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-72_002c-error-code">72, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-73_002c-error-code">73, error code</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-abort">abort</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-address-list-error">address list error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-address-locating">address locating</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-address-setting">address setting</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-admin-list-error">admin list error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alias_002c-shell">alias, shell</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alias_002c-shell-1">alias, shell</a></td><td valign="top"><a href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alloc-failed-error">alloc failed error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alloc_002dblank">alloc-blank</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-allocation-basics">allocation basics</a></td><td valign="top"><a href="#Allocation-Basics">2.3 Basic Description of Terms and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-allocation-macros">allocation macros</a></td><td valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Allocation-of-zeros">Allocation of zeros</a></td><td valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOW_005fFREE_005fNULL">ALLOW_FREE_NULL</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOW_005fFREE_005fNULL-settings_002eh-option">ALLOW_FREE_NULL settings.h option</a></td><td valign="top"><a href="#Compatibility">5.1 General Compatibility Concerns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOW_005fFREE_005fNULL_005fMESSAGE">ALLOW_FREE_NULL_MESSAGE</a></td><td valign="top"><a href="#Logfile-Details">3.13 Explanation of the Logfile Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOW_005fFREE_005fNULL_005fMESSAGE-1">ALLOW_FREE_NULL_MESSAGE</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ALLOW_005fREALLOC_005fNULL-settings_002eh-option">ALLOW_REALLOC_NULL settings.h option</a></td><td valign="top"><a href="#Compatibility">5.1 General Compatibility Concerns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-already-free-error">already free error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ANSI_002dC-compiler">ANSI-C compiler</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-argument-checking">argument checking</a></td><td valign="top"><a href="#Argument-Checking">3.3 Checking of Function Arguments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-assembly-hacks">assembly hacks</a></td><td valign="top"><a href="#Return-Address">3.2 Getting Caller Address Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-atexit">atexit</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-atexit-function">atexit function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-author">author</a></td><td valign="top"><a href="#Top">Debug Malloc Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-automatic-shutdown">automatic shutdown</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-bad-admin-structure-list">bad admin structure list</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bad-file-error">bad file error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bad-line-error">bad line error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bad-setup-error">bad setup error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bad-size-error">bad size error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bash-shell">bash shell</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bash-shell-1">bash shell</a></td><td valign="top"><a href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bash-usage">bash usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-basic-allocation-information">basic allocation information</a></td><td valign="top"><a href="#Allocation-Basics">2.3 Basic Description of Terms and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-basic-definitions">basic definitions</a></td><td valign="top"><a href="#Basic-Definitions">2.3.1 General Memory Terms and Concepts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beginning">beginning</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-space">blank space</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-space-1">blank space</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blanking-memory">blanking memory</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blanking-memory-1">blanking memory</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bounds-checking">bounds checking</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bourne-shell-usage">Bourne shell usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-building-the-library">building the library</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-shell-usage">C shell usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-c_002b_002b-usage">c++ usage</a></td><td valign="top"><a href="#Using-With-C_002b_002b">3.8 Using the Library with C++</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-caller-address-translation">caller address translation</a></td><td valign="top"><a href="#Translate-Return-Addresses">3.9.4 Translating Return Addresses into Code Locations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-caller_0027s-address">caller&rsquo;s address</a></td><td valign="top"><a href="#Return-Address">3.2 Getting Caller Address Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-calloc">calloc</a></td><td valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cannot-locate-pointer-in-heap">cannot locate pointer in heap</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-catch_002dnull">catch-null</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-catch_002dsignals">catch-signals</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cgi_002dbin-process-debugging">cgi-bin process debugging</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cgi_002dbin-usage-of-dmalloc">cgi-bin usage of dmalloc</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-changed-memory-log">changed memory log</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dblank">check-blank</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dblank-1">check-blank</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dfence">check-fence</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dfuncs">check-funcs</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dheap">check-heap</a></td><td valign="top"><a href="#How-It-Works">2.5 How the Library Checks Your Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dheap-1">check-heap</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dheap-2">check-heap</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-check_002dshutdown">check-shutdown</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-checking-arguments">checking arguments</a></td><td valign="top"><a href="#Argument-Checking">3.3 Checking of Function Arguments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-checking-bounds">checking bounds</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-checkpoint-memory-usage">checkpoint memory usage</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-child-process-debugging">child process debugging</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clearing-memory">clearing memory</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clearing-memory-1">clearing memory</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comma-separated-tokens-in-env-variable">comma separated tokens in env variable</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-common-problems">common problems</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compatibility">compatibility</a></td><td valign="top"><a href="#Compatibility">5.1 General Compatibility Concerns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compiling-the-library">compiling the library</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-conf_002eh-file">conf.h file</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configuration-file">configuration file</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configure-script">configure script</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configure-script-1">configure script</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configuring-the-library">configuring the library</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-constancy-verification">constancy verification</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-copying">copying</a></td><td valign="top"><a href="#License">1. Library License and Copying Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-core-dump">core dump</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-core-dump-1">core dump</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-core-dump-2">core dump</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-core-dump-3">core dump</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-core-dump_002c-none">core dump, none</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-core-file">core file</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-could-not-grow-heap-by-allocating-memory">could not grow heap by allocating memory</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-count-changed">count changed</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-count-number-of-bytes-changed-since-mark">count number of bytes changed since mark</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cpp">cpp</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-csh-shell">csh shell</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-csh-shell-1">csh shell</a></td><td valign="top"><a href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-csh-usage">csh usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-current-debug-value">current debug value</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cygwin">cygwin</a></td><td valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-da-character">da character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-daemon-process-debugging">daemon process debugging</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debug-setting">debug setting</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debug-tokens">debug tokens</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugger">debugger</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugger-usage-with-dmalloc">debugger usage with dmalloc</a></td><td valign="top"><a href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugging-cgi_002dbin-processes">debugging cgi-bin processes</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugging-child-processes">debugging child processes</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugging-daemon-processes">debugging daemon processes</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugging-server-processes">debugging server processes</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-decimal-218-character">decimal 218 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-decimal-223-character">decimal 223 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-delay-heap-checking">delay heap checking</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-delay-heap-checking-1">delay heap checking</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-delay-heap-checking-2">delay heap checking</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-destructor">destructor</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-df-character">df character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-diagnosing-errors">diagnosing errors</a></td><td valign="top"><a href="#General-Errors">3.9.1 Diagnosing General Problems with a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-disabling-library-checking">disabling library checking</a></td><td valign="top"><a href="#Disabling-the-Library">3.7 How to Disable the library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-disabling-the-library">disabling the library</a></td><td valign="top"><a href="#Disabling-the-Library">3.7 How to Disable the library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc-program">dmalloc program</a></td><td valign="top"><a href="#Dmalloc-Program">4. Dmalloc Utility Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc-utility">dmalloc utility</a></td><td valign="top"><a href="#Dmalloc-Program">4. Dmalloc Utility Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_002eh-file">dmalloc.h file</a></td><td valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmallocc_002ecc">dmallocc.cc</a></td><td valign="top"><a href="#Using-With-C_002b_002b">3.8 Using the Library with C++</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmallocc_002ecc-file">dmallocc.cc file</a></td><td valign="top"><a href="#Using-With-C_002b_002b">3.8 Using the Library with C++</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmallocrc-file">dmallocrc file</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fdebug-1">dmalloc_debug</a></td><td valign="top"><a href="#Disabling-the-Library">3.7 How to Disable the library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fdebug-function">dmalloc_debug function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fdebug_005fcurrent-function">dmalloc_debug_current function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fdebug_005fsetup">dmalloc_debug_setup</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fdebug_005fsetup-function">dmalloc_debug_setup function</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fdebug_005fsetup-usage">dmalloc_debug_setup usage</a></td><td valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005ferrno-number">dmalloc_errno number</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005ferror_0028_0029-routine">dmalloc_error() routine</a></td><td valign="top"><a href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fexamine-function">dmalloc_examine function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DMALLOC_005fFUNC_005fCHECK">DMALLOC_FUNC_CHECK</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DMALLOC_005fFUNC_005fCHECK-flag">DMALLOC_FUNC_CHECK flag</a></td><td valign="top"><a href="#Argument-Checking">3.3 Checking of Function Arguments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fget_005fstats-function">dmalloc_get_stats function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005flogpath-variable">dmalloc_logpath variable</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005flog_005fchanged-function">dmalloc_log_changed function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005flog_005fstats-function">dmalloc_log_stats function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005flog_005funfreed-function">dmalloc_log_unfreed function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fmark-function">dmalloc_mark function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fmemory_005fallocated-function">dmalloc_memory_allocated function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fmessage-function">dmalloc_message function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DMALLOC_005fOPTIONS">DMALLOC_OPTIONS</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DMALLOC_005fOPTIONS-1">DMALLOC_OPTIONS</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fshutdown-function">dmalloc_shutdown function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DMALLOC_005fSIZE-option">DMALLOC_SIZE option</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fstrerror-function">dmalloc_strerror function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005ft-test-program">dmalloc_t test program</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005ftrack-function">dmalloc_track function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fverify-function">dmalloc_verify function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fverify_0028_0029-routine">dmalloc_verify() routine</a></td><td valign="top"><a href="#General-Errors">3.9.1 Diagnosing General Problems with a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dmalloc_005fvmessage-function">dmalloc_vmessage function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dump-core">dump core</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dump-core-1">dump core</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dump-core-2">dump core</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dump-core-3">dump core</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-env">env</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-environment-variable">environment variable</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-errno-value-is-not-valid">errno value is not valid</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-10">error code 10</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-11">error code 11</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-13">error code 13</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-20">error code 20</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-21">error code 21</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-22">error code 22</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-23">error code 23</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-24">error code 24</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-25">error code 25</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-26">error code 26</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-27">error code 27</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-28">error code 28</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-30">error code 30</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-40">error code 40</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-41">error code 41</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-43">error code 43</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-45">error code 45</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-60">error code 60</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-61">error code 61</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-67">error code 67</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-70">error code 70</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-72">error code 72</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code-73">error code 73</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code_002c-1">error code, 1</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-code_002c-2">error code, 2</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-codes">error codes</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-message">error message</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-number">error number</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error_002dabort">error-abort</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error_002dabort-1">error-abort</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error_002ddump">error-dump</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error_002ddump-1">error-dump</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error_002dfree_002dnull">error-free-null</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error_002dfree_002dnull-token">error-free-null token</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fADDRESS_005fLIST">ERROR_ADDRESS_LIST</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fADMIN_005fLIST">ERROR_ADMIN_LIST</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fALLOC_005fFAILED">ERROR_ALLOC_FAILED</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fALREADY_005fFREE">ERROR_ALREADY_FREE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fBAD_005fFILE">ERROR_BAD_FILE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fBAD_005fLINE">ERROR_BAD_LINE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fBAD_005fSETUP">ERROR_BAD_SETUP</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fBAD_005fSIZE">ERROR_BAD_SIZE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fFREE_005fOVERWRITTEN">ERROR_FREE_OVERWRITTEN</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fFREE_005fOVERWRITTEN-1">ERROR_FREE_OVERWRITTEN</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fIN_005fTWICE">ERROR_IN_TWICE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fIS_005fFOUND">ERROR_IS_FOUND</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fIS_005fNULL">ERROR_IS_NULL</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fLOCK_005fNOT_005fCONFIG">ERROR_LOCK_NOT_CONFIG</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fNONE">ERROR_NONE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fNOT_005fFOUND">ERROR_NOT_FOUND</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fNOT_005fIN_005fHEAP">ERROR_NOT_IN_HEAP</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fNOT_005fON_005fBLOCK">ERROR_NOT_ON_BLOCK</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fNOT_005fSTART_005fBLOCK">ERROR_NOT_START_BLOCK</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fOVER_005fFENCE">ERROR_OVER_FENCE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fOVER_005fLIMIT">ERROR_OVER_LIMIT</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fOVER_005fLIMIT-1">ERROR_OVER_LIMIT</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fSLOT_005fCORRUPT">ERROR_SLOT_CORRUPT</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fTOO_005fBIG">ERROR_TOO_BIG</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fUNDER_005fFENCE">ERROR_UNDER_FENCE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ERROR_005fWOULD_005fOVERWRITE">ERROR_WOULD_OVERWRITE</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-examine-a-pointer">examine a pointer</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extensions">extensions</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-failed-over-picket_002dfence-magic_002dnumber-check">failed over picket-fence magic-number check</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-failed-under-picket_002dfence-magic_002dnumber-check">failed under picket-fence magic-number check</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-faq">faq</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-features">features</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fence_002dpost-checking">fence-post checking</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fence_002dpost-errors">fence-post errors</a></td><td valign="top"><a href="#Fence_002dPost-Overruns">3.9.3 Diagnosing Fence-Post Overwritten Memory</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-file_002fline-numbers">file/line numbers</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-found-pointer-the-user-was-looking-for">found pointer the user was looking for</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-free-1">free</a></td><td valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-free-null-token">free null token</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-free-overwritten-error">free overwritten error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-free-space-has-been-overwritten">free space has been overwritten</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-free_002dblank">free-blank</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-free_002dblank-1">free-blank</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-freed-memory">freed memory</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-freed-memory-1">freed memory</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-gcc">gcc</a></td><td valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gdb">gdb</a></td><td valign="top"><a href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gdb-with-shared-libraries">gdb with shared libraries</a></td><td valign="top"><a href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-general-errors">general errors</a></td><td valign="top"><a href="#General-Errors">3.9.1 Diagnosing General Problems with a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-generating-core-dump">generating core dump</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-get-heap-statistics">get heap statistics</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-getenv_002c-problems-with">getenv, problems with</a></td><td valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GetEnvironmentVariableA_002c-using-with">GetEnvironmentVariableA, using with</a></td><td valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GETENV_005fSAVE-conf_002eh-option">GETENV_SAVE conf.h option</a></td><td valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-gethostname-function-usage">gethostname function usage</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-getpid-function-usage">getpid function usage</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-getting-started">getting started</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-getuid-function-usage">getuid function usage</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hanging-program">hanging program</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HAVE_005fGETENVIRONMENTVARIABLEA">HAVE_GETENVIRONMENTVARIABLEA</a></td><td valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap-memory">heap memory</a></td><td valign="top"><a href="#Basic-Definitions">2.3.1 General Memory Terms and Concepts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-heap-statistics-function">heap statistics function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-help">help</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hexadecimal-0xda-character">hexadecimal 0xda character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hexadecimal-0xdf-character">hexadecimal 0xdf character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-high-token">high token</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hints-that-may-help">hints that may help</a></td><td valign="top"><a href="#Other-Hints">3.14 Various Other Hints That May Help</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hostname-in-logfile-path">hostname in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-how-do-i_002e_002e_002e">how do i...</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-how-to-begin">how to begin</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-HUP-signal">HUP signal</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ident">ident</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-in-twice-error">in twice error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-initialization-and-setup-failed">initialization and setup failed</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-installing-the-library">installing the library</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-INT-signal">INT signal</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interaction-count">interaction count</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interaction-count-1">interaction count</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-internal-address-list-corruption">internal address list corruption</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-internal-error-number">internal error number</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-internal-memory-slot-corruption">internal memory slot corruption</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-INTERNAL_005fMEMORY_005fSPACE">INTERNAL_MEMORY_SPACE</a></td><td valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interval-setting">interval setting</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interval-setting-1">interval setting</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-introduction">introduction</a></td><td valign="top"><a href="#Top">Debug Malloc Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invalid-allocation-size">invalid allocation size</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invalid-errno-value">invalid errno value</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-INVALID_005fERROR">INVALID_ERROR</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-is-found-error">is found error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-is-null-error">is null error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-isc-license">isc license</a></td><td valign="top"><a href="#License">1. Library License and Copying Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-iteration-count">iteration count</a></td><td valign="top"><a href="#How-It-Works">2.5 How the Library Checks Your Program</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-J">J</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-jump-start">jump start</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-K">K</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-kill-process">kill process</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-KILL_005fPROCESS">KILL_PROCESS</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ksh-shell">ksh shell</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ksh-shell-1">ksh shell</a></td><td valign="top"><a href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ksh-usage">ksh usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-largest-maximum-allocation-size-exceeded">largest maximum allocation size exceeded</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-leaking-memory">leaking memory</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-leaking-memory-1">leaking memory</a></td><td valign="top"><a href="#Memory-Leaks">3.9.2 Tracking Down Non-Freed Memory</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libdmallocxx_002ea">libdmallocxx.a</a></td><td valign="top"><a href="#Using-With-C_002b_002b">3.8 Using the Library with C++</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-library-permissions">library permissions</a></td><td valign="top"><a href="#License">1. Library License and Copying Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-library-utility">library utility</a></td><td valign="top"><a href="#Dmalloc-Program">4. Dmalloc Utility Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-library-version">library version</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-license">license</a></td><td valign="top"><a href="#License">1. Library License and Copying Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lock-on">lock on</a></td><td valign="top"><a href="#Using-With-Threads">3.10 Using the Library with a Thread Package</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lock-on-1">lock on</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lock_002don">lock-on</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lock_002don-not-configured">lock-on not configured</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lockon-setting">lockon setting</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log-memory-changes">log memory changes</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log-statistics">log statistics</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log-unfreed-memory">log unfreed memory</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dadmin">log-admin</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dbad_002dspace">log-bad-space</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dcurrent_002dtime">log-current-time</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002delapsed_002dtime">log-elapsed-time</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dknown">log-known</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dnon_002dfree">log-non-free</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dnonfree_002dspace">log-nonfree-space</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dstats">log-stats</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dtrans">log-trans</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logfile-format">logfile format</a></td><td valign="top"><a href="#Logfile-Details">3.13 Explanation of the Logfile Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logfile-message-writer">logfile message writer</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logfile-message-writer-1">logfile message writer</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logfile-name">logfile name</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logfile-not-produced">logfile not produced</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logfile-setting">logfile setting</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logging-information-to-disk">logging information to disk</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-logging-statistics">logging statistics</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fITERATION">LOG_ITERATION</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fITERATION-1">LOG_ITERATION</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOG_005fITERATION_005fCOUNT">LOG_ITERATION_COUNT</a></td><td valign="top"><a href="#How-It-Works">2.5 How the Library Checks Your Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-low-token">low token</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-macros_002c-allocation">macros, allocation</a></td><td valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-making-the-library">making the library</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-malloc">malloc</a></td><td valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-malloc-functions">malloc functions</a></td><td valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-malloc-library-has-gone-recursive">malloc library has gone recursive</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mark-count">mark count</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mark-memory-position">mark memory position</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-medium-token">medium token</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memalign">memalign</a></td><td valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-allocated-function">memory allocated function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-definitions">memory definitions</a></td><td valign="top"><a href="#Basic-Definitions">2.3.1 General Memory Terms and Concepts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-leaks">memory leaks</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-leaks-1">memory leaks</a></td><td valign="top"><a href="#Memory-Leaks">3.9.2 Tracking Down Non-Freed Memory</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-limit">memory limit</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-limit-1">memory limit</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-position-marker">memory position marker</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-problems-in-system-functions">memory problems in system functions</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-transaction-count">memory transaction count</a></td><td valign="top"><a href="#How-It-Works">2.5 How the Library Checks Your Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-memory-transaction-count-1">memory transaction count</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-missing-core-dump">missing core dump</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mmap">mmap</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mmap-1">mmap</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mmap-2">mmap</a></td><td valign="top"><a href="#General-Errors">3.9.1 Diagnosing General Problems with a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mmap-3">mmap</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mmap_002c-usage-without">mmap, usage without</a></td><td valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-name-of-host-in-logfile-path">name of host in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-never_002dreuse">never-reuse</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no-core-dump">no core dump</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no-error">no error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-no-logfile-produced">no logfile produced</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-none-token">none token</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-not-found-error">not found error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-not-in-heap-error">not in heap error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-not-on-block-boundary-error">not on block boundary error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-not-start-block-error">not start block error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-number-bytes-changed-since-mark">number bytes changed since mark</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-number-of-bytes-allocated">number of bytes allocated</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-octal-332-character">octal 332 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-octal-337-character">octal 337 character</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-on_005fexit">on_exit</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-on_005fexit-function">on_exit function</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-open-source-license">open source license</a></td><td valign="top"><a href="#License">1. Library License and Copying Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-other-hints">other hints</a></td><td valign="top"><a href="#Other-Hints">3.14 Various Other Hints That May Help</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-over-fence-error">over fence error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-over-limit-error">over limit error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-over-user-specified-allocation-limit-error">over user specified allocation limit error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-override-debug-settings">override debug settings</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-override-debug-settings-1">override debug settings</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overview">overview</a></td><td valign="top"><a href="#Overview">2. Description of Features and How to Get Started</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overwriting-memory">overwriting memory</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overwriting-memory-1">overwriting memory</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-page-size">page size</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-permissions-of-the-library">permissions of the library</a></td><td valign="top"><a href="#License">1. Library License and Copying Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pid-in-logfile-path">pid in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-information">pointer information</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-is-not-on-block-boundary">pointer is not on block boundary</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-is-not-pointing-to-heap-data-space">pointer is not pointing to heap data space</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-is-not-to-start-of-memory-block">pointer is not to start of memory block</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-is-null-error">pointer is null error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-not-found-error">pointer not found error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-not-in-heap-error">pointer not in heap error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-seen-count">pointer seen count</a></td><td valign="top"><a href="#Memory-Leaks">3.9.2 Tracking Down Non-Freed Memory</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-portability">portability</a></td><td valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-possibly-bad-_002ec-file-line_002dnumber">possibly bad .c file line-number</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-possibly-bad-_002ec-filename-pointer">possibly bad .c filename pointer</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-preallocated-memory-heap">preallocated memory heap</a></td><td valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-print_002dmessages">print-messages</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-printenv">printenv</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-problems">problems</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-process_002did-in-logfile-path">process-id in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-program-core">program core</a></td><td valign="top"><a href="#Dumping-Core">3.4 Generating a Core File on Errors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-programming">programming</a></td><td valign="top"><a href="#Programming">3. How to Program with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pthreads">pthreads</a></td><td valign="top"><a href="#Using-With-Threads">3.10 Using the Library with a Thread Package</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-questions">questions</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quick-start">quick start</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ra">ra</a></td><td valign="top"><a href="#Return-Address">3.2 Getting Caller Address Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ra_005finfo_002epl">ra_info.pl</a></td><td valign="top"><a href="#Return-Address">3.2 Getting Caller Address Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ra_005finfo_002epl-1">ra_info.pl</a></td><td valign="top"><a href="#Translate-Return-Addresses">3.9.4 Translating Return Addresses into Code Locations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rc-file">rc file</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rc-shell">rc shell</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reading-environment_002c-problems-with">reading environment, problems with</a></td><td valign="top"><a href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-realloc">realloc</a></td><td valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-realloc_002dcopy">realloc-copy</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-recalloc">recalloc</a></td><td valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-recursion">recursion</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-report-heap-statistics">report heap statistics</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-restoring-library-flags">restoring library flags</a></td><td valign="top"><a href="#Disabling-the-Library">3.7 How to Disable the library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-return_002daddress">return-address</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-return_002daddress-1">return-address</a></td><td valign="top"><a href="#Return-Address">3.2 Getting Caller Address Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-return_002daddress-2">return-address</a></td><td valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-return_002daddress-translation">return-address translation</a></td><td valign="top"><a href="#Translate-Return-Addresses">3.9.4 Translating Return Addresses into Code Locations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-return_002eh-file">return.h file</a></td><td valign="top"><a href="#Return-Address">3.2 Getting Caller Address Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-runtime-token">runtime token</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-runtime_002dconfig-file">runtime-config file</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-sbrk">sbrk</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sbrk-1">sbrk</a></td><td valign="top"><a href="#General-Errors">3.9.1 Diagnosing General Problems with a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sbrk-2">sbrk</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sbrk_002c-usage-without">sbrk, usage without</a></td><td valign="top"><a href="#Portability">5.2 Issues Important for Porting the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-seen-count">seen count</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-seen-count-1">seen count</a></td><td valign="top"><a href="#Memory-Leaks">3.9.2 Tracking Down Non-Freed Memory</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-seen-count-2">seen count</a></td><td valign="top"><a href="#Logfile-Details">3.13 Explanation of the Logfile Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-server-process-debugging">server process debugging</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set-debug-functionality-flags">set debug functionality flags</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set-debug-functionality-flags-1">set debug functionality flags</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-settings_002edist-file">settings.dist file</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-settings_002eh-file">settings.h file</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-setup-debug-flags">setup debug flags</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sh-usage">sh usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shared-libraries-with-gdb">shared libraries with gdb</a></td><td valign="top"><a href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shell-usage">shell usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shutdown-on-signal">shutdown on signal</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shutdown-the-library">shutdown the library</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shutdown_002c-automatic">shutdown, automatic</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SIGHUP">SIGHUP</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SIGINT">SIGINT</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-signal-shutdown">signal shutdown</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SIGTERM">SIGTERM</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-size-of-memory-pages">size of memory pages</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slot-corrupt-error">slot corrupt error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slow-running">slow running</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-source-code">source code</a></td><td valign="top"><a href="#Source-Code">5. Information on the Source Code</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stack-memory">stack memory</a></td><td valign="top"><a href="#Basic-Definitions">2.3.1 General Memory Terms and Concepts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-start-heap-check-later">start heap check later</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-start-heap-check-later-1">start heap check later</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-start-heap-check-later-2">start heap check later</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-start-setting">start setting</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-static-memory">static memory</a></td><td valign="top"><a href="#Basic-Definitions">2.3.1 General Memory Terms and Concepts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-statistics">statistics</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-statistics-logging">statistics logging</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-STORE_005fSEEN_005fCOUNT-conf_002eh-option">STORE_SEEN_COUNT conf.h option</a></td><td valign="top"><a href="#Memory-Leaks">3.9.2 Tracking Down Non-Freed Memory</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-strdup">strdup</a></td><td valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string-error-message">string error message</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string-of-debug-tokens">string of debug tokens</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-strings">strings</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-system-memory-problems">system memory problems</a></td><td valign="top"><a href="#Features">2.4 General Features of the Library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-tcsh-shell">tcsh shell</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tcsh-shell-1">tcsh shell</a></td><td valign="top"><a href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tcsh-usage">tcsh usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TERM-signal">TERM signal</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-testing-the-library">testing the library</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thread-locking-has-not-been-configured">thread locking has not been configured</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thread_002did-in-logfile-path">thread-id in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-threads">threads</a></td><td valign="top"><a href="#Using-With-Threads">3.10 Using the Library with a Thread Package</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-time-function-usage">time function usage</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-time-in-logfile-path">time in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-token-high">token high</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-token-low">token low</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-token-medium">token medium</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-token-runtime">token runtime</a></td><td valign="top"><a href="#RC-File">4.5 Format of the Runtime Configuration File</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tokens_002c-debug">tokens, debug</a></td><td valign="top"><a href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-too-big-error">too big error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-too-slow">too slow</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-track-memory-calls">track memory calls</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tracking-addresses">tracking addresses</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transaction-count">transaction count</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transaction-count-1">transaction count</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tried-to-free-previously-freed-pointer">tried to free previously freed pointer</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-troubleshooting">troubleshooting</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-turning-off-library-flags">turning off library flags</a></td><td valign="top"><a href="#Disabling-the-Library">3.7 How to Disable the library</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-uid-in-logfile-path">uid in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-under-fence-error">under fence error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unfreed-memory-log">unfreed memory log</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-usage-of-dmalloc-in-a-daemon">usage of dmalloc in a daemon</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-usage-of-dmalloc-in-a-server">usage of dmalloc in a server</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-usage-of-dmalloc-with-cgi_002dbin">usage of dmalloc with cgi-bin</a></td><td valign="top"><a href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-usage-of-the-utility">usage of the utility</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-use-of-pointer-would-exceed-allocation">use of pointer would exceed allocation</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-user_002did-in-logfile-path">user-id in logfile path</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-USE_005fMMAP-conf_002eh-option">USE_MMAP conf.h option</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-USE_005fRETURN_005fMACROS-conf_002eh-option">USE_RETURN_MACROS conf.h option</a></td><td valign="top"><a href="#Installation">2.1 How to Install the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-using-a-debugger-with-dmalloc">using a debugger with dmalloc</a></td><td valign="top"><a href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-utility-program">utility program</a></td><td valign="top"><a href="#Dmalloc-Program">4. Dmalloc Utility Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-utility-usage">utility usage</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-utility-version">utility version</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-valloc">valloc</a></td><td valign="top"><a href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-various-hints">various hints</a></td><td valign="top"><a href="#Other-Hints">3.14 Various Other Hints That May Help</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-verify-pointers">verify pointers</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-verify-the-heap">verify the heap</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version-of-library">version of library</a></td><td valign="top"><a href="#Logfile-Details">3.13 Explanation of the Logfile Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version-of-utility">version of utility</a></td><td valign="top"><a href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-where-to-begin">where to begin</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-why-hanging">why hanging</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-why-running-slow">why running slow</a></td><td valign="top"><a href="#Troubleshooting">6. Some Solutions to Common Problems</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-would-overwrite-error">would overwrite error</a></td><td valign="top"><a href="#Error-Codes">3.6 Description of the Internal Error Codes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write-message-to-logfile">write message to logfile</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write-message-to-logfile-1">write message to logfile</a></td><td valign="top"><a href="#Extensions">3.5 Additional Non-standard Routines</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Index-of-Concepts-1_cp_letter-Z">Z</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-zeros_002c-allocation-of">zeros, allocation of</a></td><td valign="top"><a href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-zsh-shell">zsh shell</a></td><td valign="top"><a href="#Getting-Started">2.2 Getting Started with the Library</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-zsh-shell-1">zsh shell</a></td><td valign="top"><a href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-zsh-usage">zsh usage</a></td><td valign="top"><a href="#Environment-Variable">4.3 Environment Variable Name and Features</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Index-of-Concepts-1_cp_symbol-1" class="summary-letter"><b>%</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-2" class="summary-letter"><b>-</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-3" class="summary-letter"><b>.</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-4" class="summary-letter"><b>0</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-5" class="summary-letter"><b>1</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-6" class="summary-letter"><b>2</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-7" class="summary-letter"><b>3</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-8" class="summary-letter"><b>4</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-9" class="summary-letter"><b>6</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_symbol-10" class="summary-letter"><b>7</b></a>
 &nbsp; 
<br>
<a href="#Index-of-Concepts-1_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-J" class="summary-letter"><b>J</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-Q" class="summary-letter"><b>Q</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
<a href="#Index-of-Concepts-1_cp_letter-Z" class="summary-letter"><b>Z</b></a>
 &nbsp; 
</td></tr></table>


<hr size="6">
<a name="SEC_Contents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>Table of Contents</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Library-License-and-Copying-Information" href="#License">1. Library License and Copying Information</a></li>
  <li><a name="toc-Description-of-Features-and-How-to-Get-Started" href="#Overview">2. Description of Features and How to Get Started</a>
  <ul class="toc">
    <li><a name="toc-How-to-Install-the-Library" href="#Installation">2.1 How to Install the Library</a></li>
    <li><a name="toc-Getting-Started-with-the-Library" href="#Getting-Started">2.2 Getting Started with the Library</a></li>
    <li><a name="toc-Basic-Description-of-Terms-and-Functions" href="#Allocation-Basics">2.3 Basic Description of Terms and Functions</a>
    <ul class="toc">
      <li><a name="toc-General-Memory-Terms-and-Concepts" href="#Basic-Definitions">2.3.1 General Memory Terms and Concepts</a></li>
      <li><a name="toc-Functionality-Supported-by-All-Malloc-Libraries" href="#Malloc-Functions">2.3.2 Functionality Supported by All Malloc Libraries</a></li>
    </ul></li>
    <li><a name="toc-General-Features-of-the-Library" href="#Features">2.4 General Features of the Library</a></li>
    <li><a name="toc-How-the-Library-Checks-Your-Program" href="#How-It-Works">2.5 How the Library Checks Your Program</a></li>
  </ul></li>
  <li><a name="toc-How-to-Program-with-the-Library" href="#Programming">3. How to Program with the Library</a>
  <ul class="toc">
    <li><a name="toc-Macros-Providing-File-and-Line-Information" href="#Allocation-Macros">3.1 Macros Providing File and Line Information</a></li>
    <li><a name="toc-Getting-Caller-Address-Information" href="#Return-Address">3.2 Getting Caller Address Information</a></li>
    <li><a name="toc-Checking-of-Function-Arguments" href="#Argument-Checking">3.3 Checking of Function Arguments</a></li>
    <li><a name="toc-Generating-a-Core-File-on-Errors" href="#Dumping-Core">3.4 Generating a Core File on Errors</a></li>
    <li><a name="toc-Additional-Non_002dstandard-Routines" href="#Extensions">3.5 Additional Non-standard Routines</a></li>
    <li><a name="toc-Description-of-the-Internal-Error-Codes" href="#Error-Codes">3.6 Description of the Internal Error Codes</a></li>
    <li><a name="toc-How-to-Disable-the-library" href="#Disabling-the-Library">3.7 How to Disable the library</a></li>
    <li><a name="toc-Using-the-Library-with-C_002b_002b" href="#Using-With-C_002b_002b">3.8 Using the Library with C++</a></li>
    <li><a name="toc-Using-Dmalloc-With-a-Debugger" href="#Using-With-a-Debugger">3.9 Using Dmalloc With a Debugger</a>
    <ul class="toc">
      <li><a name="toc-Diagnosing-General-Problems-with-a-Debugger" href="#General-Errors">3.9.1 Diagnosing General Problems with a Debugger</a></li>
      <li><a name="toc-Tracking-Down-Non_002dFreed-Memory" href="#Memory-Leaks">3.9.2 Tracking Down Non-Freed Memory</a></li>
      <li><a name="toc-Diagnosing-Fence_002dPost-Overwritten-Memory" href="#Fence_002dPost-Overruns">3.9.3 Diagnosing Fence-Post Overwritten Memory</a></li>
      <li><a name="toc-Translating-Return-Addresses-into-Code-Locations" href="#Translate-Return-Addresses">3.9.4 Translating Return Addresses into Code Locations</a></li>
    </ul></li>
    <li><a name="toc-Using-the-Library-with-a-Thread-Package" href="#Using-With-Threads">3.10 Using the Library with a Thread Package</a></li>
    <li><a name="toc-Using-the-library-with-Cygwin-environment_002e" href="#Using-With-Cygwin">3.11 Using the library with Cygwin environment.</a></li>
    <li><a name="toc-Debugging-Memory-in-a-Server-or-Cgi_002dBin-Process" href="#Debugging-A-Server">3.12 Debugging Memory in a Server or Cgi-Bin Process</a></li>
    <li><a name="toc-Explanation-of-the-Logfile-Output" href="#Logfile-Details">3.13 Explanation of the Logfile Output</a></li>
    <li><a name="toc-Various-Other-Hints-That-May-Help" href="#Other-Hints">3.14 Various Other Hints That May Help</a></li>
  </ul></li>
  <li><a name="toc-Dmalloc-Utility-Program" href="#Dmalloc-Program">4. Dmalloc Utility Program</a>
  <ul class="toc">
    <li><a name="toc-Using-a-Shell-Alias-with-the-Utility" href="#Shell-Alias">4.1 Using a Shell Alias with the Utility</a></li>
    <li><a name="toc-How-to-Use-the-Dmalloc-Program" href="#Utility-Usage">4.2 How to Use the Dmalloc Program</a></li>
    <li><a name="toc-Environment-Variable-Name-and-Features" href="#Environment-Variable">4.3 Environment Variable Name and Features</a></li>
    <li><a name="toc-Description-of-the-Debugging-Tokens" href="#Debug-Tokens">4.4 Description of the Debugging Tokens</a></li>
    <li><a name="toc-Format-of-the-Runtime-Configuration-File" href="#RC-File">4.5 Format of the Runtime Configuration File</a></li>
  </ul></li>
  <li><a name="toc-Information-on-the-Source-Code" href="#Source-Code">5. Information on the Source Code</a>
  <ul class="toc">
    <li><a name="toc-General-Compatibility-Concerns" href="#Compatibility">5.1 General Compatibility Concerns</a></li>
    <li><a name="toc-Issues-Important-for-Porting-the-Library" href="#Portability">5.2 Issues Important for Porting the Library</a></li>
  </ul></li>
  <li><a name="toc-Some-Solutions-to-Common-Problems" href="#Troubleshooting">6. Some Solutions to Common Problems</a></li>
  <li><a name="toc-Index-of-Concepts-1" href="#Index-of-Concepts">Index of Concepts</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>Gray Watson</em> on <em>December 28, 2020</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<p>
 <font size="-1">
  This document was generated by <em>Gray Watson</em> on <em>December 28, 2020</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
 </font>
 <br>

</p>
</body>
</html>
